/** 
 * xsound.min.js
 * @fileoverview Web Audio API Library
 *
 * Copyright 2012, 2013, 2014@Tomohiro IKEDA
 * Released under the MIT license
 */
(function(v){function L(a){this.isActive=Boolean(a)}function B(){this.media=null;this.ex="";this.duration=0;this.playbackRate=this.volume=1;this.muted=this.loop=this.controls=!1;this.callbacks={}}function u(a,c){function b(a){this.listener=a.listener;this.dopplerFactor=1;this.speedOfSound=343.3;this.positions={x:0,y:0,z:0};this.fronts={x:0,y:0,z:-1};this.ups={x:0,y:1,z:0};this.velocities={x:0,y:0,z:0};this.listener.setPosition(this.positions.x,this.positions.y,this.positions.z);this.listener.setOrientation(this.fronts.x,
this.fronts.y,this.fronts.z,this.ups.x,this.ups.y,this.ups.z);this.listener.setVelocity(this.velocities.x,this.velocities.y,this.velocities.z)}function e(a){function b(a){this.SAMPLE_RATE=a;this.drawType="";this.svgParent=this.svg=this.context=this.canvas=null;this.interval=1E3;this.timerid=null;this.styles={shape:"line",grad:[{offset:0,color:"rgba(0, 128, 255, 1.0)"},{offset:1,color:"rgba(0, 0, 255, 1.0)"}],wave:"rgba(0, 0, 255, 1.0)",grid:"rgba(255, 0, 0, 1.0)",text:"rgba(255, 255, 255, 1.0)",font:"13px Arial",
width:1.5,cap:"round",join:"miter",top:15,right:15,bottom:15,left:15}}function d(a){b.call(this,a);this.isActive=Boolean(!1);this.savedImage=null;this.length=0;this.currentTime="rgba(255, 255, 255, 1.0)";this.plotinterval=0.0625;this.textinterval=60}function h(a){b.call(this,a);this.isActive=Boolean(!1);this.textinterval=0.005}function c(a){b.call(this,a);this.isActive=Boolean(!1);this.type="uint";this.size=256;this.textinterval=1E3}v.requestAnimationFrame=v.requestAnimationFrame||v.webkitRequestAnimationFrame||
v.mozRequestAnimationFrame||function(a){v.setTimeout(a,1E3/60)};v.cancelAnimationFrame=v.cancelAnimationFrame||v.webkitCancelAnimationFrame||v.mozCancelAnimationFrame||v.clearTimeout;this.analyser=a.createAnalyser();this.input=a.createGain();this.output=a.createGain();this.input.connect(this.analyser);this.analyser.connect(this.output);b.prototype=_implement(L.prototype);b.prototype.constructor=b;d.prototype=D(b.prototype);h.prototype=D(b.prototype);c.prototype=D(b.prototype);d.prototype.constructor=
d;h.prototype.constructor=h;c.prototype.constructor=c;this.timeAllL=new d(a.sampleRate);this.timeAllR=new d(a.sampleRate);this.time=new h(a.sampleRate);this.fft=new c(a.sampleRate);this.analyser.fftSize=2048;this.analyser.minDecibels=-100;this.analyser.maxDecibels=-30;this.analyser.smoothingTimeConstant=0.8;b.prototype.setup=function(a,m,d){switch(String(a).toLowerCase()){case "canvas":this.drawType="canvas";this.canvas=document.getElementById(String(m));this.canvas instanceof HTMLCanvasElement?this.context=
this.canvas.getContext("2d"):l(this+" setup() : The designated canvas ID does not exists !!");break;case "svg":this.drawType="svg";this.svg=document.getElementById(String(m));this.svg instanceof SVGElement?(this.svgParent=document.getElementById(String(d)),this.svgParent instanceof HTMLElement||l(this+" setup() : The designated parent node ID does not exists !!")):l(this+" setup() : The designated SVG ID does not exists !!");break;default:l(this+' setup() : The 1st argument is either "canvas" or "svg" !!')}return this};
b.prototype.param=function(a,m){var d=String(a).replace(/-/g,"").toLowerCase();switch(d){case "interval":if(void 0===m)return this.interval;if("auto"===String(m).toLowerCase())this.interval="auto";else{var h=parseFloat(m);0<=h?this.interval=h:l(this+' param() : The range of "'+a+'" is greater than or equal 0 !!')}break;case "shape":if(void 0===m)return this.styles.shape;h=String(m).toLowerCase();"line"===h||"rect"===h?this.styles.shape="gradient"!==this.styles.wave?h:"rect":l(this+' param() : The type of "'+
a+'" is either "line" or "rect" !!');break;case "grad":if(void 0===m)return this.styles.grad;Array.isArray(m)||(m=[m]);for(var d=!1,h=0,b=m.length;h<b;h++){var c=m[h];if("offset"in c&&"color"in c){if(c=parseFloat(c.offset),isNaN(c)||0>c||1<c){d=!0;break}}else{d=!0;break}}d?l(this+' param() : The type of "'+a+'" is object\'s array that has 2 properties ("offset", "color") !! The range of "offset" is between 0 and 1 !!'):this.styles.grad=m;break;case "wave":case "grid":case "text":case "font":case "cap":case "join":if(void 0===
m)return this.styles[d];"string"!==typeof m?l(this+' param() : The type of "'+a+'" is string type !!'):("wave"===d&&"gradient"===m&&(this.styles.shape="rect"),this.styles[d]="font"===d?m:m.toLowerCase());break;case "width":case "top":case "right":case "bottom":case "left":if(void 0===m)return this.styles[d];h="width"===d?parseFloat(m):parseInt(m);0<=h?this.styles[d]=h:l(this+' param() : The range of "'+a+'" is greater than or equal 0 !!')}};b.prototype.start=function(a,m,d){switch(this.drawType){case "canvas":this.drawToCanvas(a,
m,d);break;case "svg":this.drawToSVG(a,m,d)}return this};b.prototype.download=function(){switch(this.drawType){case "canvas":return this.canvas.toDataURL("image/png").replace("image/png","image/octet-stream");case "svg":return this.svgParent.innerHTML;default:return this}};b.prototype.drawToCanvas=function(a){};b.prototype.drawToSVG=function(a){};b.prototype.toString=function(){return"[SoundModule Draw]"};d.prototype.param=function(a,m){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,
a[d]);else{d=String(a).replace(/-/g,"").toLowerCase();var h=b.prototype.param.call(this,d,m);if(void 0!==h)return h;switch(d){case "currenttime":if(void 0===m)return this.currentTime;"string"!==typeof m?l(this+' param() : The type of "'+a+'" is string type !!'):this.currentTime=m.toLowerCase();break;case "plotinterval":case "textinterval":if(void 0===m)return this[d];h=parseFloat(m);0<h?this[d]=h:l(this+' param() : The range of "'+a+'" is greater than 0 !!');break;default:d in this.styles||l(this+
' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}}return this};d.prototype.drawToCanvas=function(a){if(!(this.canvas instanceof HTMLCanvasElement&&this.isActive))return this;var m=this.context,d=this.canvas.width,h=this.canvas.height,b=d-(this.styles.left+this.styles.right),c=h-(this.styles.top+this.styles.bottom),w=Math.floor(c/2)+this.styles.top,e=0,g=0,f="",f=Math.floor(this.plotinterval*this.SAMPLE_RATE),l=Math.floor(this.textinterval*this.SAMPLE_RATE);
m.clearRect(0,0,d,h);switch(this.styles.shape){case "line":m.strokeStyle=this.styles.wave;m.lineWidth=this.styles.width;m.lineCap=this.styles.cap;m.lineJoin=this.styles.join;m.beginPath();for(var k=0,r=a.length;k<r;k++)0===k%f&&(e=Math.floor(k/r*b)+this.styles.left,g=Math.floor(c/2*(1-a[k]))+this.styles.top,0===k?m.moveTo(e,g):m.lineTo(e,g));m.stroke();break;case "rect":for("gradient"!==this.styles.wave&&(m.fillStyle=this.styles.wave),k=0,r=a.length;k<r;k++)if(0===k%f){e=Math.floor(k/r*b)+this.styles.left;
g=-1*Math.floor(c/2*a[k]);if("gradient"===this.styles.wave){for(var n=c/2+this.styles.top,n=m.createLinearGradient(0,n,0,n+g),q=0,p=this.styles.grad.length;q<p;q++){var t=this.styles.grad[q];n.addColorStop(t.offset,t.color)}m.fillStyle=n}m.fillRect(e,w,this.styles.width,g)}}if("none"!==this.styles.grid||"none"!==this.styles.text){k=0;for(r=a.length;k<r;k++)0===k%l&&(e=Math.floor(k/r*b)+this.styles.left,f=Math.floor(k/this.SAMPLE_RATE)+" min","none"!==this.styles.grid&&(m.fillStyle=this.styles.grid,
m.fillRect(e,this.styles.top,1,c)),"none"!==this.styles.text&&(m.fillStyle=this.styles.text,m.font=this.styles.font,m.fillText(f,e-m.measureText(f).width/2,h)));w=["-1.00","-0.50"," 0.00"," 0.50"," 1.00"];k=0;for(r=w.length;k<r;k++)f=w[k],e=Math.floor(d-m.measureText(f).width),g=Math.floor((1-parseFloat(f.trim()))*(c/2))+this.styles.top,"none"!==this.styles.grid&&(m.fillStyle=this.styles.grid,m.fillRect(this.styles.left,g,b,1)),g-=parseInt(m.font.match(/\s*(\d+)px.*/)[1]/4),"none"!==this.styles.text&&
(m.fillStyle=this.styles.text,m.font=this.styles.font,m.fillText(f,e,g))}this.savedImage=m.getImageData(0,0,d,h);this.length=a.length;m.fillStyle=this.currentTime;m.fillRect(this.styles.left,this.styles.top,1,c);return this};d.prototype.drawToSVG=function(a){if(!(this.svg instanceof SVGElement&&this.svgParent instanceof HTMLElement&&this.isActive))return this;var m=this.svgParent.innerHTML.match(/(<svg[^<>]*>).*<\/svg>/)[1]+"</svg>",d=this.svg.getAttribute("width"),h=this.svg.getAttribute("height"),
b=d-(this.styles.left+this.styles.right),c=h-(this.styles.top+this.styles.bottom),w=Math.floor(c/2)+this.styles.top,e=0,g=0,f="",f=Math.floor(this.plotinterval*this.SAMPLE_RATE),k=Math.floor(this.textinterval*this.SAMPLE_RATE),l="";switch(this.styles.shape){case "line":l+="stroke : "+this.styles.wave+"; ";l=l+"fill : none; "+("stroke-width : "+this.styles.width+"; ");l+="stroke-linecap : "+this.styles.cap+"; ";l+="stroke-linejoin : "+this.styles.join+";";break;case "rect":if("gradient"===this.styles.wave){var r;
r='<defs><linearGradient id="svg-linear-gradient" x1="0%" y1="0%" x2="0%" y2="100%">';for(var n=0,q=this.styles.grad.length;n<q;n++){var p=this.styles.grad[n];r+='<stop offset="'+p.offset+'" stop-color="'+p.color+'" />'}r+="</linearGradient>";r+="</defs>";l+="stroke : none; ";l+="fill : url(#svg-linear-gradient); "}else l+="stroke : none; ",l+="fill : "+this.styles.wave+"; ";l+="stroke-width : 0;"}var p="stroke : none; "+("fill : "+this.styles.grid+"; "),p=p+"stroke-width : 0;",q=this.styles.font.match(/\s*(\d+)px (.*)/),
n=q[2],t=q[1],s;s="stroke : none; "+("fill : "+this.styles.text+"; ");s+="font-family : "+n+"; ";s+="font-size : "+t+";";var E;E="stroke : none; "+("fill : "+this.currentTime+"; ");E+="stroke-width : 0;";this.svgParent.innerHTML=m;m=this.svgParent.innerHTML.replace("</svg>","");"gradient"===this.styles.wave&&(m+=r);switch(this.styles.shape){case "line":m+='<path style="'+l+'" d="';n=0;for(q=a.length;n<q;n++)0===n%f&&(e=Math.floor(n/q*b)+this.styles.left,g=Math.floor(c/2*(1-a[n]))+this.styles.top,
0===n?m+="M"+e+" "+g:(m+=" ",m+="L"+e+" "+g));m+='" />';break;case "rect":for(n=0,q=a.length;n<q;n++)0===n%f&&(e=Math.floor(n/q*b)+this.styles.left,g=Math.floor(c/2*a[n]),m+=0>g?'<rect style="'+l+'" x="'+e+'" y="'+w+'" width="'+this.styles.width+'" height="'+-g+'" />':'<rect style="'+l+'" x="'+e+'" y="'+w+'" width="'+this.styles.width+'" height="'+g+'" transform="translate('+this.styles.width+" 0) rotate(180 "+e+" "+w+')" />')}if("none"!==this.styles.grid||"none"!==this.styles.text){w=document.createElement("canvas").getContext("2d");
n=0;for(q=a.length;n<q;n++)0===n%k&&(e=Math.floor(n/q*b)+this.styles.left,f=Math.floor(n/this.SAMPLE_RATE)+" min","none"!==this.styles.grid&&(m+='<rect style="'+p+'" x="'+e+'" y="'+this.styles.top+'" width="1" height="'+c+'" />'),e-=Math.floor(w.measureText(f).width/2),"none"!==this.styles.text&&(m+='<text style="'+s+'" x="'+e+'" y="'+h+'">'+f+"</text>"));h=["-1.00","-0.50"," 0.00"," 0.50"," 1.00"];n=0;for(q=h.length;n<q;n++)f=h[n],e=d-Math.floor(1.5*w.measureText(f).width),g=Math.floor((1-parseFloat(f.trim()))*
(c/2))+this.styles.top,"none"!==this.styles.grid&&(m+='<rect style="'+p+'" x="'+this.styles.left+'" y="'+g+'" width="'+b+'" height="1" />'),g-=Math.floor(parseInt(t)/4),"none"!==this.styles.text&&(m+='<text style="'+s+'" x="'+e+'" y="'+g+'">'+f+"</text>")}m+='<rect class="svg-current-time" style="'+E+'" x="'+this.styles.left+'" y="'+this.styles.top+'" width="1" height="'+c+'" />';m+="</svg>";this.savedImage=this.svgParent.innerHTML=m;this.length=a.length;return this};d.prototype.update=function(m){switch(this.drawType){case "canvas":if(this.canvas instanceof
HTMLCanvasElement&&this.isActive)break;else return;case "svg":if(!(this.svg instanceof SVGElement&&this.svgParent instanceof HTMLElement&&this.isActive))return}m=parseFloat(m);if(isNaN(m)||0>m)l(this+" update() : The 1st argument is number type greater than 0 !!");else{var a=0,d=0,h=0,b=0,h=0;switch(this.drawType){case "canvas":if(this.savedImage instanceof ImageData){var c=this.context,a=this.canvas.width,d=this.canvas.height,h=a-(this.styles.left+this.styles.right),b=d-(this.styles.top+this.styles.bottom),
h=Math.floor(m*this.SAMPLE_RATE/this.length*h)+this.styles.left;c.clearRect(0,0,a,d);c.putImageData(this.savedImage,0,0);c.fillStyle=this.currentTime;c.fillRect(h,this.styles.top,1,b)}break;case "svg":d=this.svgParent.getElementsByClassName("svg-current-time")[0],d instanceof SVGElement&&(a=this.svg.getAttribute("width"),this.svg.getAttribute("height"),h=a-(this.styles.left+this.styles.right),h=Math.floor(m*this.SAMPLE_RATE/this.length*h),d.setAttribute("transform","translate("+h+" 0)"))}return this}};
d.prototype.drag=function(m){var a=null,d=!0;switch(this.drawType){case "canvas":if(this.canvas instanceof HTMLCanvasElement&&this.isActive){a=this.canvas;d=!0;break}else return;case "svg":if(this.svg instanceof SVGElement&&this.svgParent instanceof HTMLElement&&this.isActive)a=this.svgParent,d=!1;else return}var h="",b="",c="";/iPhone|iPad|iPod|Android/.test(navigator.userAgent)?(h="touchstart",b="touchmove",c="touchend"):(h="mousedown",b="mousemove",c="mouseup");var w=function(a){var d=0,h=0;switch(this.drawType){case "canvas":d=
this.canvas.offsetLeft;h=this.canvas.width;break;case "svg":d=this.svgParent.offsetLeft,h=this.svg.getAttribute("width")}a-=d+this.styles.left;h-=this.styles.left+this.styles.right;0>a&&(a=0);a>h&&(a=h);h=a/h*this.length/this.SAMPLE_RATE;this.update(h);"[object Function]"===Object.prototype.toString.call(m)&&m(h)},e=function(a){if(a.pageX)return a.pageX;if(a.touches[0])return a.touches[0].pageX},g=!1,f=this;a.addEventListener(h,function(a){null!==f.savedImage&&(w.call(f,e(a)),g=!0)},d);a.addEventListener(b,
function(a){a.preventDefault();g&&f.savedImage instanceof ImageData&&w.call(f,e(a))},d);v.addEventListener(c,function(a){g=!1},!0);return this};d.prototype.toString=function(){return"[SoundModule Analyser TimeAll]"};h.prototype.param=function(a,m){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else{d=String(a).replace(/-/g,"").toLowerCase();var h=b.prototype.param.call(this,d,m);if(void 0!==h)return h;switch(d){case "textinterval":if(void 0===m)return this.textinterval;
d=parseFloat(m);0<d?this.textinterval=d:l(this+' param() : The range of "'+a+'" is greater than 0 !!');break;default:"interval"===d||d in this.styles||l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}}return this};h.prototype.drawToCanvas=function(a){if(!(this.canvas instanceof HTMLCanvasElement&&this.isActive))return this;var m=this.context,d=this.canvas.width,h=this.canvas.height,b=d-(this.styles.left+this.styles.right),c=h-(this.styles.top+this.styles.bottom),
w=Math.floor(c/2)+this.styles.top,e=0,g=0,f="",l=Math.floor(this.textinterval*this.SAMPLE_RATE);m.clearRect(0,0,d,h);switch(this.styles.shape){case "line":m.strokeStyle=this.styles.wave;m.lineWidth=this.styles.width;m.lineCap=this.styles.cap;m.lineJoin=this.styles.join;m.beginPath();for(var k=0,r=a.length;k<r;k++)e=Math.floor(k/r*b)+this.styles.left,g=Math.floor((1-a[k]/255)*c)+this.styles.top,0===k?m.moveTo(e,g):m.lineTo(e,g);m.stroke();break;case "rect":for("gradient"!==this.styles.wave&&(m.fillStyle=
this.styles.wave),k=0,r=a.length;k<r;k++){e=Math.floor(k/r*b)+this.styles.left;g=Math.floor((0.5-a[k]/255)*c);if("gradient"===this.styles.wave){for(var f=c/2+this.styles.top,f=m.createLinearGradient(0,f,0,f+g),n=0,q=this.styles.grad.length;n<q;n++){var p=this.styles.grad[n];f.addColorStop(p.offset,p.color)}m.fillStyle=f}m.fillRect(e,w,this.styles.width,g)}}if("none"!==this.styles.grid||"none"!==this.styles.text){k=0;for(r=a.length;k<r;k++)0===k%l&&(e=Math.floor(k/r*b)+this.styles.left,f=Math.floor(k/
this.SAMPLE_RATE*1E3)+" ms","none"!==this.styles.grid&&(m.fillStyle=this.styles.grid,m.fillRect(e,this.styles.top,1,c)),"none"!==this.styles.text&&(m.fillStyle=this.styles.text,m.font=this.styles.font,m.fillText(f,e-m.measureText(f).width/2,h)));a=["-1.00","-0.50"," 0.00"," 0.50"," 1.00"];k=0;for(r=a.length;k<r;k++)f=a[k],e=Math.floor(d-m.measureText(f).width),g=Math.floor((1-parseFloat(f.trim()))*(c/2))+this.styles.top,"none"!==this.styles.grid&&(m.fillStyle=this.styles.grid,m.fillRect(this.styles.left,
g,b,1)),g-=parseInt(m.font.match(/\s*(\d+)px.*/)[1]/4),"none"!==this.styles.text&&(m.fillStyle=this.styles.text,m.font=this.styles.font,m.fillText(f,e,g))}return this};h.prototype.drawToSVG=function(m){if(!(this.svg instanceof SVGElement&&this.svgParent instanceof HTMLElement&&this.isActive))return this;var a=this.svgParent.innerHTML.match(/(<svg[^<>]*>).*<\/svg>/)[1]+"</svg>",d=this.svg.getAttribute("width"),h=this.svg.getAttribute("height"),b=d-(this.styles.left+this.styles.right),c=h-(this.styles.top+
this.styles.bottom),w=Math.floor(c/2)+this.styles.top,e=0,g=0,f="",k=Math.floor(this.textinterval*this.SAMPLE_RATE),f="";switch(this.styles.shape){case "line":f+="stroke : "+this.styles.wave+"; ";f=f+"fill : none; "+("stroke-width : "+this.styles.width+"; ");f+="stroke-linecap : "+this.styles.cap+"; ";f+="stroke-linejoin : "+this.styles.join+";";break;case "rect":if("gradient"===this.styles.wave){var l;l='<defs><linearGradient id="svg-linear-gradient" x1="0%" y1="0%" x2="0%" y2="100%">';for(var r=
0,n=this.styles.grad.length;r<n;r++){var q=this.styles.grad[r];l+='<stop offset="'+q.offset+'" stop-color="'+q.color+'" />'}l+="</linearGradient>";l+="</defs>";f+="stroke : none; ";f+="fill : url(#svg-linear-gradient); "}else f+="stroke : none; ",f+="fill : "+this.styles.wave+"; ";f+="stroke-width : 0;"}var q="stroke : none; "+("fill : "+this.styles.grid+"; "),q=q+"stroke-width : 0;",n=this.styles.font.match(/\s*(\d+)px (.*)/),r=n[2],p=n[1],t;t="stroke : none; "+("fill : "+this.styles.text+"; ");
t+="font-family : "+r+"; ";t+="font-size : "+p+";";this.svgParent.innerHTML=a;a=this.svgParent.innerHTML.replace("</svg>","");"gradient"===this.styles.wave&&(a+=l);switch(this.styles.shape){case "line":a+='<path style="'+f+'" d="';r=0;for(n=m.length;r<n;r++)e=Math.floor(r/n*b)+this.styles.left,g=Math.floor((1-m[r]/255)*c)+this.styles.top,0===r?a+="M"+e+" "+g:(a+=" ",a+="L"+e+" "+g);a+='" />';break;case "rect":for(r=0,n=m.length;r<n;r++)e=Math.floor(r/n*b)+this.styles.left,g=Math.floor((m[r]/255-0.5)*
c),a+=0>g?'<rect style="'+f+'" x="'+e+'" y="'+w+'" width="'+this.styles.width+'" height="'+-g+'" />':'<rect style="'+f+'" x="'+e+'" y="'+w+'" width="'+this.styles.width+'" height="'+g+'" transform="translate('+this.styles.width+" 0) rotate(180 "+e+" "+w+')" />'}if("none"!==this.styles.grid||"none"!==this.styles.text){w=document.createElement("canvas").getContext("2d");r=0;for(n=m.length;r<n;r++)0===r%k&&(e=Math.floor(r/n*b)+this.styles.left,f=Math.floor(r/this.SAMPLE_RATE*1E3)+" ms","none"!==this.styles.grid&&
(a+='<rect style="'+q+'" x="'+e+'" y="'+this.styles.top+'" width="1" height="'+c+'" />'),e-=Math.floor(w.measureText(f).width/2),"none"!==this.styles.text&&(a+='<text style="'+t+'" x="'+e+'" y="'+h+'">'+f+"</text>"));m=["-1.00","-0.50"," 0.00"," 0.50"," 1.00"];r=0;for(n=m.length;r<n;r++)f=m[r],e=d-Math.floor(1.5*w.measureText(f).width),g=Math.floor((1-parseFloat(f.trim()))*(c/2))+this.styles.top,"none"!==this.styles.grid&&(a+='<rect style="'+q+'" x="'+this.styles.left+'" y="'+g+'" width="'+b+'" height="1" />'),
g-=Math.floor(parseInt(p)/4),"none"!==this.styles.text&&(a+='<text style="'+t+'" x="'+e+'" y="'+g+'">'+f+"</text>")}this.svgParent.innerHTML=a+"</svg>";return this};h.prototype.toString=function(){return"[SoundModule Analyser Time]"};c.prototype.param=function(a,m){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else{d=String(a).replace(/-/g,"").toLowerCase();var h=b.prototype.param.call(this,d,m);if(void 0!==h)return h;switch(d){case "type":if(void 0===
m)return this.type;d=String(m).toLowerCase();"uint"===d||"float"===d?this.type=d:l(this+' param() : The value of "'+a+'" is either "uint" or "float" !!');break;case "size":if(void 0===m)return this.size;d=parseFloat(m);0<=d&&1024>=d?this.size=d:l(this+' param() : The range of "'+a+'" is between 0 and 1024 !!');break;case "textinterval":if(void 0===m)return this.textinterval;d=parseFloat(m);0<d?this.textinterval=d:l(this+' param() : The range of "'+a+'" is greater than 0 !!');break;default:"interval"===
d||d in this.styles||l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}}return this};c.prototype.drawToCanvas=function(a,m,d){if(!(this.canvas instanceof HTMLCanvasElement&&this.isActive))return this;var h=parseFloat(m),b=parseFloat(d),c=b-h;d=this.context;m=this.canvas.width;var e=this.canvas.height,g=m-(this.styles.left+this.styles.right),w=e-(this.styles.top+this.styles.bottom),f=0,r=0,k="",l=this.size>a.length?a.length:this.size,n=Math.floor(this.textinterval/
(this.SAMPLE_RATE/(2*a.length)));d.clearRect(0,0,m,e);switch(this.type){case "float":d.strokeStyle="gradient"!==this.styles.wave?this.styles.wave:"rgba(0, 0, 255, 1.0)";d.lineWidth=this.styles.width;d.lineCap=this.styles.cap;d.lineJoin=this.styles.join;d.beginPath();for(var q=0;q<l;q++)f=Math.floor(q/l*g)+this.styles.left,r=Math.abs(a[q]-b)*(w/c)+this.styles.top,0===q?d.moveTo(f,r):d.lineTo(f,r);d.stroke();break;default:switch(this.styles.shape){case "line":d.strokeStyle=this.styles.wave;d.lineWidth=
this.styles.width;d.lineCap=this.styles.cap;d.lineJoin=this.styles.join;d.beginPath();for(q=0;q<l;q++)f=Math.floor(q/l*g)+this.styles.left,r=Math.floor((1-a[q]/255)*w)+this.styles.top,0===q?d.moveTo(f,r):d.lineTo(f,r);d.stroke();break;case "rect":for("gradient"!==this.styles.wave&&(d.fillStyle=this.styles.wave),q=0;q<l;q++){f=Math.floor(q/l*g)+this.styles.left;r=-1*Math.floor(a[q]/255*w);if("gradient"===this.styles.wave){for(var k=w+this.styles.top,k=d.createLinearGradient(0,k,0,k+r),p=0,t=this.styles.grad.length;p<
t;p++){var s=this.styles.grad[p];k.addColorStop(s.offset,s.color)}d.fillStyle=k}d.fillRect(f,w+this.styles.top,this.styles.width,r)}}}if("none"!==this.styles.grid||"none"!==this.styles.text){for(q=a=0;q<l;q++)0===q%n&&(f=Math.floor(q/l*g)+this.styles.left,a=Math.floor(q/n*this.textinterval),k=1E3>a?a+" Hz":String(a/1E3).slice(0,3)+" kHz","none"!==this.styles.grid&&(d.fillStyle=this.styles.grid,d.fillRect(f,this.styles.top,1,w)),"none"!==this.styles.text&&(d.fillStyle=this.styles.text,d.font=this.styles.font,
d.fillText(k,f-d.measureText(k).width/2,e)));switch(this.type){case "float":for(q=h;q<=b;q+=10)k=q+"dB",f=m-Math.floor(d.measureText(k).width),r=Math.floor(-1*(q-b)/c*w)+this.styles.top,"none"!==this.styles.grid&&(d.fillStyle=this.styles.grid,d.fillRect(this.styles.left,r,g,1)),r-=parseInt(d.font.match(/\s*(\d+)px.*/)[1]/4),"none"!==this.styles.text&&(d.fillStyle=this.styles.text,d.font=this.styles.font,d.fillText(k,f,r));break;default:for(a=["0.00","0.25","0.50","0.75","1.00"],q=0,h=a.length;q<h;q++)k=
a[q],f=m-Math.floor(d.measureText(k).width),r=(1-parseFloat(k))*w+this.styles.top,"none"!==this.styles.grid&&(d.fillStyle=this.styles.grid,d.fillRect(this.styles.left,r,g,1)),r-=parseInt(d.font.match(/\s*(\d+)px.*/)[1]/4),"none"!==this.styles.text&&(d.fillStyle=this.styles.text,d.font=this.styles.font,d.fillText(k,f,r))}}return this};c.prototype.drawToSVG=function(a,m,d){if(!(this.svg instanceof SVGElement&&this.svgParent instanceof HTMLElement&&this.isActive))return this;m=parseFloat(m);var h=parseFloat(d),
b=h-m;d=this.svgParent.innerHTML.match(/(<svg[^<>]*>).*<\/svg>/)[1]+"</svg>";var c=this.svg.getAttribute("width"),f=this.svg.getAttribute("height"),w=c-(this.styles.left+this.styles.right),g=f-(this.styles.top+this.styles.bottom),e=0,r=0,k="",l=this.size>a.length?a.length:this.size,n=Math.floor(this.textinterval/(this.SAMPLE_RATE/(2*a.length))),k="";switch(this.styles.shape){case "line":k+="stroke : "+this.styles.wave+"; ";k=k+"fill : none; "+("stroke-width : "+this.styles.width+"; ");k+="stroke-linecap : "+
this.styles.cap+"; ";k+="stroke-linejoin : "+this.styles.join+";";break;case "rect":if("uint"===this.type&&"gradient"===this.styles.wave){var q;q='<defs><linearGradient id="svg-linear-gradient" x1="0%" y1="0%" x2="0%" y2="100%">';for(var p=0,t=this.styles.grad.length;p<t;p++){var s=this.styles.grad[p];q+='<stop offset="'+s.offset+'" stop-color="'+s.color+'" />'}q+="</linearGradient>";q+="</defs>";k+="stroke : none; ";k+="fill : url(#svg-linear-gradient); ";k+="stroke-width : 0;"}else"uint"===this.type&&
"gradient"!==this.styles.wave?(k+="stroke : none; ",k+="fill : "+this.styles.wave+"; ",k+="stroke-width : 0;"):"uint"!==this.type&&(k+="stroke : rgba(0, 0, 255, 1.0); ",k+="fill : none; ",k+="stroke-width : "+this.styles.width+"; ",k+="stroke-linecap : "+this.styles.cap+"; ",k+="stroke-linejoin : "+this.styles.join+";")}var s="stroke : none; "+("fill : "+this.styles.grid+"; "),s=s+"stroke-width : 0;",E=this.styles.font.match(/\s*(\d+)px (.*)/),p=E[2],E=E[1],z;z="stroke : none; "+("fill : "+this.styles.text+
"; ");z+="font-family : "+p+"; ";z+="font-size : "+E+";";this.svgParent.innerHTML=d;d=this.svgParent.innerHTML.replace("</svg>","");"uint"===this.type&&"gradient"===this.styles.wave&&(d+=q);switch(this.type){case "float":d+='<path style="'+k+'" d="';for(p=0;p<l;p++)e=Math.floor(p/l*w)+this.styles.left,r=Math.floor(g/b*(a[p]-h)*-1)+this.styles.top,0===p?d+="M"+e+" "+r:(d+=" ",d+="L"+e+" "+r);d+='" />';break;default:switch(this.styles.shape){case "line":d+='<path style="'+k+'" d="';for(p=0;p<l;p++)e=
Math.floor(p/l*w)+this.styles.left,r=Math.floor((1-a[p]/255)*g)+this.styles.top,0===p?d+="M"+e+" "+r:(d+=" ",d+="L"+e+" "+r);d+='" />';break;case "rect":for(p=0;p<l;p++)e=Math.floor(p/l*w)+this.styles.left,r=Math.floor(a[p]/255*g),d+='<rect style="'+k+'" x="'+e+'" y="'+(this.styles.top+g)+'" width="'+this.styles.width+'" height="'+r+'" transform="translate('+this.styles.width+" 0) rotate(180 "+e+" "+(this.styles.top+g)+')" />'}}if("none"!==this.styles.grid||"none"!==this.styles.text){a=document.createElement("canvas").getContext("2d");
for(p=q=0;p<l;p++)0===p%n&&(e=Math.floor(p/l*w)+this.styles.left,q=Math.floor(p/n*this.textinterval),k=1E3>q?q+" Hz":String(q/1E3).slice(0,3)+" kHz","none"!==this.styles.grid&&(d+='<rect style="'+s+'" x="'+e+'" y="'+this.styles.top+'" width="1" height="'+g+'" />'),e-=Math.floor(a.measureText(k).width/2),"none"!==this.styles.text&&(d+='<text style="'+z+'" x="'+e+'" y="'+f+'">'+k+"</text>"));switch(this.type){case "float":for(p=m;p<=h;p+=10)k=p+"dB",e=c-Math.floor(1.5*a.measureText(k).width),r=Math.floor(-1*
(p-h)/b*g)+this.styles.top,"none"!==this.styles.grid&&(d+='<rect style="'+s+'" x="'+this.styles.left+'" y="'+r+'" width="'+w+'" height="1" />'),r-=Math.floor(parseInt(E)/4),"none"!==this.styles.text&&(d+='<text style="'+z+'" x="'+e+'" y="'+r+'">'+k+"</text>");break;default:for(m=["0.00","0.25","0.50","0.75","1.00"],p=0,t=m.length;p<t;p++)k=m[p],e=c-Math.floor(1.5*a.measureText(k).width),r=(1-parseFloat(k))*g+this.styles.top,"none"!==this.styles.grid&&(d+='<rect style="'+s+'" x="'+this.styles.left+
'" y="'+r+'" width="'+w+'" height="1" />'),r-=Math.floor(parseInt(E)/4),"none"!==this.styles.text&&(d+='<text style="'+z+'" x="'+e+'" y="'+r+'">'+k+"</text>")}}this.svgParent.innerHTML=d+"</svg>";return this};c.prototype.toString=function(){return"[SoundModule Analyser FFT]"}}function g(a,b,d,h){this.SAMPLE_RATE=a.sampleRate;this.context=a;this.processor=a.createScriptProcessor(b,d,h);this.mixLs=[];this.mixRs=[];this.trackLs=[];this.trackRs=[];this.numtrack=0;this.activeTrack=-1;this.paused=!0;this.gainR=
this.gainL=1}function k(a,b,d,h,c){this.isActive=Boolean(!1);this.context=a;this.analyser=c;this.sender=a.createScriptProcessor(2048>b?b:2048,d,h);this.receiver=a.createScriptProcessor(2048>b?b:2048,d,h);this.websocket=null;this.paused=!0}function f(a,b){this.isActive=Boolean(!0);this.context=a;this.input=a.createGain();this.output=a.createGain();this.lfo=a.createOscillator();this.depth=a.createGain();this.rate=this.lfo.frequency;this.processor=a.createScriptProcessor(b,1,2);this.lfo.start=this.lfo.start||
this.lfo.noteOn;this.lfo.stop=this.lfo.stop||this.lfo.noteOff;this.values={};this.isStop=!0}function n(a,b){f.call(this,a,b);this.compressor=a.createDynamicsCompressor();this.input.connect(this.compressor);this.compressor.connect(this.output);this.compressor.threshold.value=-24;this.compressor.knee.value=30;this.compressor.ratio.value=12;this.compressor.attack.value=0.003;this.compressor.release.value=0.25}function q(a,b){f.call(this,a,b);this.distortion=a.createWaveShaper();this.clean=a.createGain();
this.drive=a.createGain();this.size=256;this.createCurve=function(a,m){if(0<a&&1>a){for(var b=new Float32Array(m),c=2*a/(1-a),e=0;e<m;e++){var f=2*(e-0)/(m-0)+-1;b[e]=(1+c)*f/(1+c*Math.abs(f))}this.distortion.curve=b}else this.distortion.curve=null};this.input.connect(this.clean);this.clean.connect(this.output);this.input.connect(this.distortion);this.distortion.connect(this.drive);this.drive.connect(this.output);this.clean.gain.value=1;this.drive.gain.value=0}function p(a,b){f.call(this,a,b);this.lowpass=
a.createBiquadFilter();this.mix=a.createGain();this.lowpass.LOWPASS=this.lowpass.LOWPASS||0;this.input.connect(this.output);this.input.connect(this.lowpass);this.lowpass.connect(this.mix);this.mix.connect(this.output);this.lfo.connect(this.depth);this.depth.connect(this.lowpass.frequency);this.lowpass.type="[object String]"===Object.prototype.toString.call(this.lowpass.type)?"lowpass":this.lowpass.LOWPASS;this.lowpass.frequency.value=500;this.lowpass.gain.value=0;this.lowpass.Q.value=1;this.depth.gain.value=
0;this.rate.value=0;this.mix.gain.value=0}function t(a,b){f.call(this,a,b);this.bass=a.createBiquadFilter();this.middle=a.createBiquadFilter();this.treble=a.createBiquadFilter();this.presence=a.createBiquadFilter();this.bass.LOWSHELF=this.bass.LOWSHELF||3;this.middle.PEAKING=this.middle.PEAKING||5;this.treble.HIGHSHELF=this.treble.HIGHSHELF||4;this.presence.HIGHSHELF=this.presence.HIGHSHELF||4;this.input.connect(this.bass);this.bass.connect(this.middle);this.middle.connect(this.treble);this.treble.connect(this.presence);
this.presence.connect(this.output);this.bass.type="[object String]"===Object.prototype.toString.call(this.bass.type)?"lowshelf":this.bass.LOWSHELF;this.middle.type="[object String]"===Object.prototype.toString.call(this.middle.type)?"peaking":this.middle.PEAKING;this.treble.type="[object String]"===Object.prototype.toString.call(this.treble.type)?"highshelf":this.treble.HIGHSHELF;this.presence.type="[object String]"===Object.prototype.toString.call(this.presence.type)?"highshelf":this.presence.HIGHSHELF;
this.bass.frequency.value=500;this.middle.frequency.value=1E3;this.treble.frequency.value=2E3;this.presence.frequency.value=4E3;this.middle.Q.value=Math.SQRT1_2;this.bass.gain.value=0;this.middle.gain.value=0;this.treble.gain.value=0;this.presence.gain.value=0}function H(a,b){f.call(this,a,b);this.filter=a.createBiquadFilter();this.filter.LOWPASS=this.filter.LOWPASS||0;this.filter.HIGHPASS=this.filter.HIGHPASS||1;this.filter.BANDPASS=this.filter.BANDPASS||2;this.filter.LOWSHELF=this.filter.LOWSHELF||
3;this.filter.HIGHSHELF=this.filter.HIGHSHELF||4;this.filter.PEAKING=this.filter.PEAKING||5;this.filter.NOTCH=this.filter.NOTCH||6;this.filter.ALLPASS=this.filter.ALLPASS||7;this.input.connect(this.filter);this.filter.connect(this.output);this.filter.frequency.setTargetAtTime=this.filter.frequency.setTargetAtTime||this.filter.frequency.setTargetValueAtTime;this.filter.type="[object String]"===Object.prototype.toString.call(this.filter.type)?"lowpass":this.filter.LOWPASS;this.filter.frequency.value=
350;this.filter.Q.value=1;this.filter.gain.value=0;this.maxFrequency=this.filter.frequency.value;this.attack=0.01;this.decay=0.3;this.sustain=0.5;this.release=1}function E(a,b){f.call(this,a,b);this.amplitude=a.createGain();this.input.connect(this.amplitude);this.amplitude.connect(this.output);this.lfo.connect(this.depth);this.depth.connect(this.amplitude.gain);this.amplitude.gain.value=1;this.depth.gain.value=0;this.rate.value=0}function s(a,b){f.call(this,a,b);this.amplitude=a.createGain();this.input.connect(this.amplitude);
this.amplitude.connect(this.output);this.lfo.connect(this.depth);this.depth.connect(this.amplitude.gain);this.amplitude.gain.value=1;this.depth.gain.value=0;this.rate.value=0}function z(a,b){f.call(this,a,b);this.amplitudeL=a.createGain();this.amplitudeR=a.createGain();this.splitter=a.createChannelSplitter(2);this.merger=a.createChannelMerger(2);this.input.connect(this.splitter);this.splitter.connect(this.amplitudeL,0,0);this.splitter.connect(this.amplitudeR,1,0);this.amplitudeL.connect(this.merger,
0,0);this.amplitudeR.connect(this.merger,0,1);this.merger.connect(this.output);this.lfoSplitter=a.createChannelSplitter(2);this.lfo.connect(this.depth);this.depth.connect(this.processor);this.processor.connect(this.lfoSplitter);this.lfoSplitter.connect(this.amplitudeL.gain,0);this.lfoSplitter.connect(this.amplitudeR.gain,1);this.amplitudeL.gain.value=1;this.amplitudeR.gain.value=1;this.depth.gain.value=0;this.rate.value=0}function u(a,b){f.call(this,a,b);this.NUM_FILTER=12;this.filters=Array(this.NUM_FILTER);
for(var d=0;d<this.NUM_FILTER;d++)this.filters[d]=a.createBiquadFilter(),this.filters[d].ALLPASS=this.filters[d].ALLPASS||7,this.filters[d].type="[object String]"===Object.prototype.toString.call(this.filters[d].type)?"allpass":this.filters[d].ALLPASS,this.filters[d].frequency.value=350,this.filters[d].Q.value=Math.SQRT1_2,this.filters[d].gain.value=0;this.mix=a.createGain();this.input.connect(this.output);this.input.connect(this.filters[0]);for(d=0;d<this.NUM_FILTER;d++)d<this.NUM_FILTER-1?this.filters[d].connect(this.filters[d+
1]):(this.filters[d].connect(this.mix),this.mix.connect(this.output));this.lfo.connect(this.depth);for(var d=0,h=this.filters.length;d<h;d++)this.depth.connect(this.filters[d].frequency);this.depth.gain.value=0;this.rate.value=0;this.mix.gain.value=0}function y(a,b){f.call(this,a,b);this.delay=a.createDelay();this.mix=a.createGain();this.feedback=a.createGain();this.input.connect(this.output);this.input.connect(this.delay);this.delay.connect(this.feedback);this.feedback.connect(this.delay);this.delay.connect(this.mix);
this.mix.connect(this.output);this.lfo.connect(this.depth);this.depth.connect(this.delay.delayTime);this.delay.delayTime.value=0.005;this.depth.gain.value=0;this.rate.value=0;this.mix.gain.value=0;this.feedback.gain.value=0}function A(a,b){f.call(this,a,b);this.delay=a.createDelay();this.mix=a.createGain();this.feedback=a.createGain();this.input.connect(this.output);this.input.connect(this.delay);this.delay.connect(this.feedback);this.feedback.connect(this.delay);this.delay.connect(this.mix);this.mix.connect(this.output);
this.lfo.connect(this.depth);this.depth.connect(this.delay.delayTime);this.delay.delayTime.value=0.02;this.depth.gain.value=0;this.rate.value=0;this.mix.gain.value=0;this.feedback.gain.value=0}function K(a,b){f.call(this,a,b);this.MAX_DELAY_TIME=5;this.delay=a.createDelay(this.MAX_DELAY_TIME);this.dry=a.createGain();this.wet=a.createGain();this.feedback=a.createGain();this.input.connect(this.dry);this.dry.connect(this.output);this.input.connect(this.delay);this.delay.connect(this.feedback);this.feedback.connect(this.delay);
this.delay.connect(this.wet);this.wet.connect(this.output);this.delay.delayTime.value=0;this.dry.gain.value=1;this.wet.gain.value=0;this.feedback.gain.value=0}function x(a,b){f.call(this,a,b);this.dry=a.createGain();this.wet=a.createGain();this.convolver=a.createConvolver();this.decodeAudioData=function(d,h,b){a.decodeAudioData(d,h,b)};this.input.connect(this.dry);this.dry.connect(this.output);this.input.connect(this.convolver);this.convolver.connect(this.wet);this.wet.connect(this.output);this.dry.gain.value=
1;this.wet.gain.value=0}function C(a,b){f.call(this,a,b);this.panner=a.createPanner();this.panner.EQUALPOWER=this.panner.EQUALPOWER||0;this.panner.HRTF=this.panner.HRTF||1;this.panner.LINEAR_DISTANCE=this.panner.LINEAR_DISTANCE||0;this.panner.INVERSE_DISTANCE=this.panner.INVERSE_DISTANCE||1;this.panner.EXPONENTIAL_DISTANCE=this.panner.EXPONENTIAL_DISTANCE||2;this.input.connect(this.panner);this.panner.connect(this.output);this.positions={x:0,y:0,z:0};this.orientations={x:1,y:0,z:0};this.velocities=
{x:0,y:0,z:0};this.panner.refDistance=1;this.panner.maxDistance=1E4;this.panner.rolloffFactor=1;this.panner.coneInnerAngle=360;this.panner.coneOuterAngle=360;this.panner.coneOuterGain=0;this.panner.panningModel="[object String]"===Object.prototype.toString.call(this.panner.panningModel)?"HRTF":1;this.panner.distanceModel="[object String]"===Object.prototype.toString.call(this.panner.distanceModel)?"inverse":1;this.panner.setPosition(this.positions.x,this.positions.y,this.positions.z);this.panner.setOrientation(this.orientations.x,
this.orientations.y,this.orientations.z);this.panner.setVelocity(this.velocities.x,this.velocities.y,this.velocities.z)}function B(a){this.context=a;this.generators=[];this.activeIndexes=[];this.activeCounter=0;this.attack=0.01;this.decay=0.3;this.sustain=0.5;this.release=1}this.context=a;this.SAMPLE_RATE=a.sampleRate;this.NUM_OUTPUT=this.NUM_INPUT=2;if(void 0!==c)switch(parseInt(c)){case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:this.BUFFER_SIZE=parseInt(c);break;default:l(this+
" constructor() : The 2nd argument is one of 256, 512, 1024, 2048, 4096, 8192, 16384 !!");return}else/(Win(dows )?NT 6\.2)/.test(navigator.userAgent)?this.BUFFER_SIZE=1024:/(Win(dows )?NT 6\.1)/.test(navigator.userAgent)?this.BUFFER_SIZE=1024:/(Win(dows )?NT 6\.0)/.test(navigator.userAgent)?this.BUFFER_SIZE=2048:/Win(dows )?(NT 5\.1|XP)/.test(navigator.userAgent)?this.BUFFER_SIZE=4096:/Mac|PPC/.test(navigator.userAgent)?this.BUFFER_SIZE=1024:/Linux/.test(navigator.userAgent)?this.BUFFER_SIZE=8192:
/iPhone|iPad|iPod/.test(navigator.userAgent)?this.BUFFER_SIZE=2048:this.BUFFER_SIZE=16384;this.masterVolume=a.createGain();this.processor=a.createScriptProcessor(this.BUFFER_SIZE,this.NUM_INPUT,this.NUM_OUTPUT);k.prototype=_implement(L.prototype);f.prototype=_implement(L.prototype);k.prototype.constructor=k;f.prototype.constructor=f;n.prototype=D(f.prototype);q.prototype=D(f.prototype);p.prototype=D(f.prototype);t.prototype=D(f.prototype);H.prototype=D(f.prototype);E.prototype=D(f.prototype);s.prototype=
D(f.prototype);z.prototype=D(f.prototype);u.prototype=D(f.prototype);y.prototype=D(f.prototype);A.prototype=D(f.prototype);K.prototype=D(f.prototype);x.prototype=D(f.prototype);C.prototype=D(f.prototype);n.prototype.constructor=n;q.prototype.constructor=q;p.prototype.constructor=p;t.prototype.constructor=t;H.prototype.constructor=H;E.prototype.constructor=E;s.prototype.constructor=s;z.prototype.constructor=z;u.prototype.constructor=u;y.prototype.constructor=y;A.prototype.constructor=A;K.prototype.constructor=
K;x.prototype.constructor=x;C.prototype.constructor=C;this.listener=new b(a);this.analyser=new e(a);this.recorder=new g(a,this.BUFFER_SIZE,this.NUM_INPUT,this.NUM_OUTPUT);this.session=new k(a,this.BUFFER_SIZE,this.NUM_INPUT,this.NUM_OUTPUT,this.analyser);this.eg=new B(a);this.compressor=new n(a,this.BUFFER_SIZE);this.distortion=new q(a,this.BUFFER_SIZE);this.wah=new p(a,this.BUFFER_SIZE);this.equalizer=new t(a,this.BUFFER_SIZE);this.filter=new H(a,this.BUFFER_SIZE);this.tremolo=new E(a,this.BUFFER_SIZE);
this.ringmodulator=new s(a,this.BUFFER_SIZE);this.autopanner=new z(a,this.BUFFER_SIZE);this.phaser=new u(a,this.BUFFER_SIZE);this.flanger=new y(a,this.BUFFER_SIZE);this.chorus=new A(a,this.BUFFER_SIZE);this.delay=new K(a,this.BUFFER_SIZE);this.reverb=new x(a,this.BUFFER_SIZE);this.panner=new C(a,this.BUFFER_SIZE);this.nodes=[this.compressor,this.distortion,this.wah,this.equalizer,this.filter,this.tremolo,this.ringmodulator,this.autopanner,this.flanger,this.phaser,this.chorus,this.delay,this.reverb];
this.Effector=f;this.plugins=[];b.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "dopplerfactor":if(void 0===b)return this.listener.dopplerFactor;var h=parseFloat(b);0<=h?this.listener.dopplerFactor=h:l(this+' param() : The range of "'+a+'" is greater than or equal 0 !!');break;case "speedofsound":if(void 0===b)return this.listener.speedOfSound;h=parseFloat(b);0<=
h?this.listener.speedOfSound=h:l(this+' param() : The range of "'+a+'" is greater than or equal 0 !!');break;case "x":case "y":case "z":if(void 0===b)return this.positions[d];h=parseFloat(b);isNaN(h)?l(this+' param() : The type of "'+a+'" is number type !!'):(this.positions[d]=h,this.listener.setPosition(this.positions.x,this.positions.y,this.positions.z));break;case "fx":case "fy":case "fz":if(void 0===b)return this.fronts[d.charAt(1)];h=parseFloat(b);isNaN(h)?l(this+' param() : The type of "'+a+
'" is number type !!'):(this.fronts[d.charAt(1)]=h,this.listener.setOrientation(this.fronts.x,this.fronts.y,this.fronts.z,this.ups.x,this.ups.y,this.ups.z));break;case "ux":case "uy":case "uz":if(void 0===b)return this.ups[d.charAt(1)];h=parseFloat(b);isNaN(h)?l(this+' param() : The type of "'+a+'" is number type !!'):(this.ups[d.charAt(1)]=h,this.listener.setOrientation(this.fronts.x,this.fronts.y,this.fronts.z,this.ups.x,this.ups.y,this.ups.z));break;case "vx":case "vy":case "vz":if(void 0===b)return this.velocities[d.charAt(1)];
h=parseFloat(b);isNaN(h)?l(this+' param() : The type of "'+a+'" is number type !!'):(this.velocities[d.charAt(1)]=h,this.listener.setVelocity(this.velocities.x,this.velocities.y,this.velocities.z));break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};b.prototype.toString=function(){return"[SoundModule Listener]"};e.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,
a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "fftsize":if(void 0===b)return this.analyser.fftSize;var h=parseInt(b);switch(h){case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:this.analyser.fftSize=h;break;default:l(this+' param() : The value of "'+a+'" is one of 32, 64, 128, 256, 512, 1024, 2048 !!')}break;case "frequencybincount":return this.analyser.frequencyBinCount;case "mindecibels":case "maxdecibels":if(void 0===b)return this.analyser[d.replace("decibels",
"Decibels")];h=parseFloat(b);if(isNaN(h))l(this+' param() : The type of "'+a+'" is number type !!');else if(this.analyser[d.replace("decibels","Decibels")]=h,this.analyser.minDecibels>=this.analyser.maxDecibels){d=this.analyser.minDecibels;var c=this.analyser.maxDecibels;l(this+' param() : The designated dB (min : "'+d+'" / max : "'+c+'") is invalid !!');this.analyser.minDecibels=-100;this.analyser.maxDecibels=-30}break;case "smoothingtimeconstant":if(void 0===b)return this.analyser.smoothingTimeConstant;
h=parseFloat(b);d=0;c=1;h>=d&&h<=c?this.analyser.smoothingTimeConstant=h:l(this+' param() : The range of "'+a+'" is between '+d+" and "+c+" !!");break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};e.prototype.start=function(a,b){var d=this;switch(String(a).replace(/-/g,"").toLowerCase()){case "timealll":if(b instanceof AudioBuffer){if(0<b.numberOfChannels){var h=new Float32Array(b.length);h.set(b.getChannelData(0));this.timeAllL.start(h)}}else l(this+
" start() : The 2nd argument is the instance of AudioBuffer !!");break;case "timeallr":b instanceof AudioBuffer?1<b.numberOfChannels&&(h=new Float32Array(b.length),h.set(b.getChannelData(1)),this.timeAllR.start(h)):l(this+" start() : The 2nd argument is the instance of AudioBuffer !!");break;case "time":h=new Uint8Array(this.analyser.fftSize);this.analyser.getByteTimeDomainData(h);this.time.start(h);this.time.timerid="auto"===this.time.interval?requestAnimationFrame(function(){d.start(a)}):v.setTimeout(function(){d.start(a)},
this.time.interval);break;case "fft":"uint"===this.fft.type?(h=new Uint8Array(this.analyser.frequencyBinCount),this.analyser.getByteFrequencyData(h),this.fft.start(h)):(h=new Float32Array(this.analyser.frequencyBinCount),this.analyser.getFloatFrequencyData(h),this.fft.start(h,this.analyser.minDecibels,this.analyser.maxDecibels));this.fft.timerid="auto"===this.fft.interval?requestAnimationFrame(function(){d.start(a)}):v.setTimeout(function(){d.start(a)},this.fft.interval);break;default:l(this+' start() : The 1st argument is one of "timeAllL", "timeAllR", "time", "fft" !!')}return this};
e.prototype.stop=function(a){switch(String(a).replace(/-/g,"").toLowerCase()){case "timealll":case "timeallr":break;case "time":"auto"===this.time.interval?v.cancelAnimationFrame(this.time.timerid):v.clearTimeout(this.time.timerid);this.time.timerid=null;break;case "fft":"auto"===this.fft.interval?v.cancelAnimationFrame(this.fft.timerid):v.clearTimeout(this.fft.timerid);this.fft.timerid=null;break;default:l(this+' stop() : The 1st argument is one of "timeAllL", "timeAllR", "time", "fft" !!')}return this};
e.prototype.domain=function(a){a=String(a).replace(/-/g,"").toLowerCase();switch(a){case "timealll":case "timeallr":return this["timeAll"+a.slice(-1).toUpperCase()];case "time":case "fft":return this[a];default:l(this+' domain() : The 1st argument is one of "timeAllL", "timeAllR", "time", "fft" !!')}};e.prototype.toString=function(){return"[SoundModule Analyser]"};g.prototype.setup=function(a){a=parseInt(a);if(0<a){this.numTrack=a;this.trackLs=Array(this.numTrack);this.trackRs=Array(this.numTrack);
for(var b=0;b<a;b++)this.trackLs[b]=[];for(b=0;b<a;b++)this.trackRs[b]=[]}else this.numTrack=1,this.trackLs=Array(this.numTrack),this.trackRs=Array(this.numTrack),this.trackLs[0]=[],this.trackRs[0]=[];return this};g.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "gainl":case "gainr":if(void 0===b)return this["gain"+d.slice(-1).toUpperCase()];var h=parseFloat(b);
0<=h&&1>=h?this["gain"+d.slice(-1).toUpperCase()]=h:l(this+' param() : The range of "'+a+'" is between 0 and 1 !!');break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};g.prototype.ready=function(a){this.isTrack(a)&&(this.activeTrack=a);return this};g.prototype.start=function(){if(-1!==this.activeTrack&&this.paused){var a=this;this.paused=!1;this.processor.onaudioprocess=function(b){if(-1!==a.activeTrack){var d=b.inputBuffer.getChannelData(0);
b=b.inputBuffer.getChannelData(1);for(var h=0;h<this.bufferSize;h++)a.trackLs[a.activeTrack].push(a.gainL*d[h]),a.trackRs[a.activeTrack].push(a.gainR*b[h])}else this.disconnect(0),this.onaudioprocess=null}}return this};g.prototype.stop=function(){this.activeTrack=-1;this.paused=!0;this.processor.disconnect(0);this.processor.onaudioprocess=null;return this};g.prototype.isTrack=function(a){a=parseInt(a);return 0<=a&&a<this.numTrack?!0:!1};g.prototype.getActiveTrack=function(){return this.activeTrack};
g.prototype.mix=function(){-1!==this.activeTrack&&this.stop();var a=function(a){for(var d="L"===a?this.trackLs:this.trackRs,m=[],b=0,c=0,e=0;;){for(var f=0,g=d.length;f<g;f++)void 0!==d[f][e]&&(b+=d[f][e],c++);if(0<c)m[e]=b/c,c=b=0,e++;else{"L"===a&&(this.mixLs=m.slice(0,m.length));"R"===a&&(this.mixRs=m.slice(0,m.length));break}}};a.call(this,"L");a.call(this,"R");return this};g.prototype.clear=function(a){-1!==this.activeTrack&&this.stop();if("all"===String(a).toLowerCase()){a=0;for(var b=this.trackLs.length;a<
b;a++)this.trackLs[a].length=0;a=0;for(b=this.trackRs.length;a<b;a++)this.trackRs[a].length=0}else this.isTrack(a)&&(this.trackLs[a].length=0,this.trackRs[a].length=0);return this};g.prototype.create=function(a,b,d,h){-1!==this.activeTrack&&this.stop();var c=[],e=[];"all"===String(a).toLowerCase()?(this.mix(),c=this.mixLs,e=this.mixRs):this.isTrack(a)&&(c=this.trackLs[a-1],e=this.trackRs[a-1]);if(0!==c.length||0!==e.length){a=1===b?1:2;b=8===d?8:16;d=[];var f=Math.min(c.length,e.length);switch(b){case 8:for(var g=
0;g<f;g++){var k=0,k=0===g%a?(c[g]+1)/2*(Math.pow(2,8)-1):(e[g-1]+1)/2*(Math.pow(2,8)-1);k>Math.pow(2,8)-1&&(k=Math.pow(2,8)-1);k<Math.pow(2,0)-1&&(k=Math.pow(2,0)-1);d.push(Math.floor(k))}break;case 16:for(g=0;g<f;g++)k=0===g%a?Math.floor(c[g]*Math.pow(2,15)):Math.floor(e[g-1]*Math.pow(2,15)),k>Math.pow(2,15)-1&&(k=Math.pow(2,15)-1),k<-Math.pow(2,15)-1&&(k=-Math.pow(2,15)-1),0>k&&(k+=Math.pow(2,16)),d.push(k)}k=36+b/8*a*f;c=8+(28+(8+b/8*a*f));g=0.5*this.SAMPLE_RATE;e=b/8*this.SAMPLE_RATE*a*0.5;f*=
b/8*a;switch(String(h).toLowerCase()){case "base64":h="RIFF"+String.fromCharCode(k>>0&255,k>>8&255,k>>16&255,k>>24&255);h+="WAVE";h+="fmt "+String.fromCharCode(16,0,0,0);h+=String.fromCharCode(1,0);h+=String.fromCharCode(a,0);h+=String.fromCharCode(g>>0&255,g>>8&255,g>>16&255,g>>24&255);h+=String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255);h+=String.fromCharCode(b/8*a,0);h+=String.fromCharCode(b,0);h+="data";h+=String.fromCharCode(f>>0&255,f>>8&255,f>>16&255,f>>24&255);g=0;for(a=d.length;g<
a;g++)h+=String.fromCharCode(d[g]>>0&255,d[g]>>8&255);return"data:audio/wav;base64,"+v.btoa(h);default:h=[82,73,70,70];h[4]=k>>0&255;h[5]=k>>8&255;h[6]=k>>16&255;h[7]=k>>24&255;h[8]=87;h[9]=65;h[10]=86;h[11]=69;h[12]=102;h[13]=109;h[14]=116;h[15]=32;h[16]=16;h[17]=0;h[18]=0;h[19]=0;h[20]=1;h[21]=0;h[22]=a;h[23]=0;h[24]=g>>0&255;h[25]=g>>8&255;h[26]=g>>16&255;h[27]=g>>24&255;h[28]=e>>0&255;h[29]=e>>8&255;h[30]=e>>16&255;h[31]=e>>24&255;h[32]=b/8*a;h[33]=0;h[34]=b;h[35]=0;h[36]=100;h[37]=97;h[38]=116;
h[39]=97;h[40]=f>>0&255;h[41]=f>>8&255;h[42]=f>>16&255;h[43]=f>>24&255;g=0;for(a=d.length;g<a;g++)h[c-f+2*g]=d[g]>>0&255,h[c-f+2*g+1]=d[g]>>8&255;v.URL=v.URL||v.webkitURL;h=new Blob([new Uint8Array(h)],{type:"audio/wav"});return v.URL.createObjectURL(h)}}};g.prototype.toString=function(){return"[SoundModule Recorder]"};k.prototype.setup=function(a,b,d,h,c,e,g){if(navigator.onLine){if("[object Object]"===Object.prototype.toString.call(a)){var f=a;"tls"in f&&(a=f.tls);"host"in f&&(b=f.host);"port"in
f&&(d=f.port);"path"in f&&(h=f.path);"open"in f&&(c=f.open);"close"in f&&(e=f.close);"error"in f&&(g=f.error)}a=a?"wss://":"ws://";"/"!==h.charAt(0)&&(h="/"+h);d=parseInt(d);if(isNaN(d)||0>d||65535<d){l(this+" setup() : The 3rd argument is number type for port number (0 - 65535)");return}this.websocket=new WebSocket(a+b+":"+d+h);this.websocket.binaryType="arraybuffer";var k=this;this.websocket.onopen=function(a){"[object Function]"===Object.prototype.toString.call(c)&&c(a,k.websocket)};this.websocket.onclose=
function(a){"[object Function]"===Object.prototype.toString.call(e)&&e(a,k.websocket)};this.websocket.onerror=function(a){"[object Function]"===Object.prototype.toString.call(g)&&g(a,k.websocket)};this.websocket.onmessage=function(a){if(k.isActive){if(a.data instanceof ArrayBuffer){var d=Math.floor(a.data.byteLength/Float32Array.BYTES_PER_ELEMENT/2),b=d*Float32Array.BYTES_PER_ELEMENT,m=new Float32Array(a.data,0,d),h=new Float32Array(a.data,b,d);k.receiver.connect(k.analyser.input);k.analyser.output.connect(k.context.destination);
k.analyser.start("time");k.analyser.start("fft");k.receiver.onaudioprocess=function(a){var d=a.outputBuffer.getChannelData(0);a=a.outputBuffer.getChannelData(1);d.set(m);a.set(h);k.isActive&&null!==k.websocket||(k.analyser.stop("time"),k.analyser.stop("fft"),this.disconnect(0),this.onaudioprocess=null)}}}else k.analyser.stop("time"),k.analyser.stop("fft"),k.receiver.disconnect(0),k.receiver.onaudioprocess=null}}else throw this.websocket=null,this.isActive=!1,Error("Now offline !!");return this};k.prototype.start=
function(){if(this.isActive&&this.isConnected()&&this.paused){this.paused=!1;var a=new Float32Array(2*this.sender.bufferSize),b=this;this.sender.onaudioprocess=function(d){if(b.isActive&&b.isConnected()){var h=d.inputBuffer.getChannelData(0);d=d.inputBuffer.getChannelData(1);for(var c=0;c<this.bufferSize;c++)a[c]=h[c],a[a.length/2+c]=d[c];b.websocket.send(a)}else b.paused=!0,b.sender.disconnect(0),b.sender.onaudioprocess=null}}return this};k.prototype.close=function(){this.websocket instanceof WebSocket&&
(this.websocket.close(),this.websocket=null);return this};k.prototype.isConnected=function(){return this.websocket instanceof WebSocket&&this.websocket.readyState===WebSocket.OPEN?!0:!1};k.prototype.toString=function(){return"[SoundModule Session]"};f.prototype.param=function(a,b){return this};f.prototype.start=function(a){if(this.isActive&&this.isStop){a=parseFloat(a);if(isNaN(a)||a<this.context.currentTime)a=this.context.currentTime;this.lfo.start(a);this.isStop=!1}return this};f.prototype.stop=
function(a,b){if(this.isActive&&!this.isStop){var d=parseFloat(a),h=parseFloat(b);if(isNaN(d)||d<this.context.currentTime)d=this.context.currentTime;if(isNaN(h)||0>h)h=0;var c=this.lfo.type,f=this.lfo.frequency.value;this.lfo.stop(d+h);this.lfo=this.context.createOscillator();this.lfo.start=this.lfo.start||this.lfo.noteOn;this.lfo.stop=this.lfo.stop||this.lfo.noteOff;this.lfo.type=c;this.lfo.frequency.value=f;this.rate=this.lfo.frequency;this.isStop=!0}return this};f.prototype.toString=function(){return"[SoundModule Effector]"};
n.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else if(d=String(a).replace(/-/g,"").toLowerCase(),d in this.compressor){if(void 0===b)return this.compressor[d].value;var h=parseFloat(b),c={threshold:-100,knee:0,ratio:1,attack:0,release:0},f={threshold:0,knee:40,ratio:20,attack:1,release:1},c=this.compressor[d].minValue||c[d],f=this.compressor[d].maxValue||f[d];h>=c&&h<=f?this.compressor[d].value=h:l(this+' param() : The range of "'+
a+'" is between '+c+" and "+f+" !!")}else l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!');return this};n.prototype.toString=function(){return"[SoundModule Compressor]"};q.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "drive":if(void 0===b)return this.drive.gain.value;d=parseFloat(b);var h=this.drive.gain.minValue||
0,c=this.drive.gain.maxValue||1;d>=h&&d<=c?(this.drive.gain.value=d,this.clean.gain.value=1-this.drive.gain.value):l(this+' param() : The range of "'+a+'" is between '+h+" and "+c+" !!");break;case "size":if(void 0===b)return this.size;d=parseInt(b);0<=d?this.size=d:l(this+' param() : The range of "'+a+'" is greater than or equal 0 !!');break;case "curve":if(void 0===b)return this.distortion.curve;switch(String(b).toLowerCase()){case "clean":this.createCurve(0,this.size);break;case "crunch":this.createCurve(0.2,
this.size);break;case "overdrive":this.createCurve(0.5,this.size);break;case "distortion":this.createCurve(0.7,this.size);break;case "fuzz":this.createCurve(0.9,this.size);break;default:l(this+' param() : The value of "'+a+'" is one of "clean", "crunch", "overdrive", "distortion", "fuzz" !!')}break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};q.prototype.toString=function(){return"[SoundModule Distortion]"};p.prototype.param=
function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "depth":if(void 0===b)return this.depth.gain.value;d=parseFloat(b);var h=0,c=this.lowpass.frequency.value;d>=h&&d<=c?this.depth.gain.value=d:l(this+' param() : The range of "'+a+'" is between '+h+" and "+c+" !!");break;case "rate":if(void 0===b)return this.rate.value;d=parseFloat(b);h=this.rate.minValue||0;c=this.rate.maxValue||1E5;
d>=h&&d<=c?this.rate.value=d:l(this+' param() : The range of "'+a+'" is between '+h+" and "+c+" !!");break;case "mix":if(void 0===b)return this.mix.gain.value;d=parseFloat(b);h=this.mix.gain.minValue||0;c=this.mix.gain.maxValue||1;d>=h&&d<=c?this.mix.gain.value=d:l(this+' param() : The range of "'+a+'" is between '+h+" and "+c+" !!");break;case "resonance":if(void 0===b)return this.lowpass.Q.value;d=parseFloat(b);h=this.lowpass.Q.minValue||1E-4;c=this.lowpass.Q.maxValue||1E3;d>=h&&d<=c?this.lowpass.Q.value=
d:l(this+' param() : The range of "'+a+'" is between '+h+" and "+c+" !!");break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};p.prototype.stop=function(a,b){f.prototype.stop.call(this,a,b);this.isActive&&(this.lfo.connect(this.depth),this.depth.connect(this.lowpass.frequency));return this};p.prototype.toString=function(){return"[SoundModule Wah]"};t.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,
a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "bass":case "middle":case "treble":case "presence":if(void 0===b)return this[d].gain.value;var h=parseFloat(b),c=this[d].gain.minValue||-40,f=this[d].gain.maxValue||40;h>=c&&h<=f?this[d].gain.value=h:l(this+' param() : The range of "'+a+'" is between '+c+" and "+f+" !!");break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};t.prototype.toString=function(){return"[SoundModule Equalizer]"};
H.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "type":if(void 0===b)return this.filter.type;var h=String(b).toLowerCase();d={lowpass:this.filter.LOWPASS,highpass:this.filter.HIGHPASS,bandpass:this.filter.BANDPASS,lowshelf:this.filter.LOWSHELF,highshelf:this.filter.HIGHSHELF,peaking:this.filter.PEAKING,notch:this.filter.NOTCH,allpass:this.filter.ALLPASS};h in d?
this.filter.type="[object String]"===Object.prototype.toString.call(this.filter.type)?h:d[h]:l(this+' param() : The value of "'+a+'" is one of "lowpass", "highpass", "bandpass", "lowshelf", "highshelf", "peaking", "notch", "allpass" !!');break;case "frequency":if(void 0===b)return this.filter.frequency.value;h=parseFloat(b);d=this.filter.frequency.minValue||10;var c=this.filter.frequency.maxValue||this.context.sampleRate/2;h>=d&&h<=c?(this.maxFrequency=h,this.filter.frequency.value=h):l(this+' param() : The range of "'+
a+'" is between '+d+" and "+c+" !!");break;case "gain":if(void 0===b)return this.filter.gain.value;h=parseFloat(b);d=this.filter.gain.minValue||-40;c=this.filter.gain.maxValue||40;h>=d&&h<=c?this.filter.gain.value=h:l(this+' param() : The range of "'+a+'" is between '+d+" and "+c+" !!");break;case "q":if(void 0===b)return this.filter.Q.value;h=parseFloat(b);d=this.filter.Q.minValue||1E-4;c=this.filter.Q.maxValue||1E3;h>=d&&h<=c?this.filter.Q.value=h:l(this+' param() : The range of "'+a+'" is between '+
d+" and "+c+" !!");break;case "attack":case "decay":case "sustain":case "release":if(void 0===b)return this[d];h=parseFloat(b);0<=h?this[d]=h:l(this+' param() : The range of "'+a+'" is greater than or equal 0 !!');break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};H.prototype.start=function(a){if(this.isActive){a=parseFloat(a);if(isNaN(a)||a<this.context.currentTime)a=this.context.currentTime;var b=a+this.attack,d=this.decay,
c=this.sustain*this.filter.frequency.value;this.filter.frequency.cancelScheduledValues(a);this.filter.frequency.setValueAtTime(this.filter.frequency.defaultValue,a);this.filter.frequency.linearRampToValueAtTime(this.maxFrequency,b);this.filter.frequency.setTargetAtTime(c,b,d)}return this};H.prototype.stop=function(a){if(this.isActive){a=parseFloat(a)-this.release;if(isNaN(a)||a<this.context.currentTime)a=this.context.currentTime;var b=this.release;this.filter.frequency.cancelScheduledValues(a);this.filter.frequency.setValueAtTime(this.filter.frequency.value,
a);this.filter.frequency.setTargetAtTime(this.filter.frequency.defaultValue,a,b)}return this};H.prototype.toString=function(){return"[SoundModule Filter]"};E.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "depth":if(void 0===b)return this.depth.gain.value;d=parseFloat(b);var c=this.depth.gain.minValue||0,f=this.depth.gain.maxValue||1;d>=c&&d<=f?this.depth.gain.value=
d:l(this+' param() : The range of "'+a+'" is between '+c+" and "+f+" !!");break;case "rate":if(void 0===b)return this.rate.value;d=parseFloat(b);c=this.rate.minValue||0;f=this.rate.maxValue||1E5;d>=c&&d<=f?this.rate.value=d:l(this+' param() : The range of "'+a+'" is between '+c+" and "+f+" !!");break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};E.prototype.stop=function(a,b){f.prototype.stop.call(this,a,b);this.isActive&&(this.lfo.connect(this.depth),
this.depth.connect(this.amplitude.gain));return this};E.prototype.toString=function(){return"[SoundModule Tremolo]"};s.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "depth":if(void 0===b)return this.depth.gain.value;d=parseFloat(b);var c=this.depth.gain.minValue||0,f=this.depth.gain.maxValue||1;d>=c&&d<=f?(this.depth.gain.value=d,this.amplitude.gain.value=0===this.depth.gain.value||
0===this.rate.value?1:0):l(this+' param() : The range of "'+a+'" is between '+c+" and "+f+" !!");break;case "rate":if(void 0===b)return this.rate.value;d=parseFloat(b);c=this.rate.minValue||0;f=this.rate.maxValue||1E5;d>=c&&d<=f?(this.rate.value=d,this.amplitude.gain.value=0===this.depth.gain.value||0===this.rate.value?1:0):l(this+' param() : The range of "'+a+'" is between '+c+" and "+f+" !!");break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};
s.prototype.stop=function(a,b){f.prototype.stop.call(this,a,b);this.isActive&&(this.lfo.connect(this.depth),this.depth.connect(this.amplitude.gain));return this};s.prototype.toString=function(){return"[SoundModule Ringmodulator]"};z.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "depth":if(void 0===b)return this.depth.gain.value;d=parseFloat(b);var c=this.depth.gain.minValue||
0,f=this.depth.gain.maxValue||1;d>=c&&d<=f?this.depth.gain.value=d:l(this+' param() : The range of "'+a+'" is between '+c+" and "+f+" !!");break;case "rate":if(void 0===b)return this.rate.value;d=parseFloat(b);c=this.rate.minValue||0;f=this.rate.maxValue||1E5;d>=c&&d<=f?this.rate.value=d:l(this+' param() : The range of "'+a+'" is between '+c+" and "+f+" !!");break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};z.prototype.start=
function(a){if(this.isActive&&this.isStop){a=parseFloat(a);if(isNaN(a)||a<this.context.currentTime)a=this.context.currentTime;this.lfo.start(a);this.isStop=!1;var b=this;this.processor.onaudioprocess=function(a){var c=a.inputBuffer.getChannelData(0),f=a.outputBuffer.getChannelData(0);a=a.outputBuffer.getChannelData(1);if(b.isActive&&0!==b.depth.gain.value&&0!==b.rate.value)for(var e=0;e<this.bufferSize;e++)f[e]=c[e],a[e]=-c[e];else for(e=0;e<this.bufferSize;e++)f[e]=0,a[e]=0}}return this};z.prototype.stop=
function(a,b){f.prototype.stop.call(this,a,b);this.isActive&&(this.processor.disconnect(0),this.processor.onaudioprocess=null,this.lfo.connect(this.depth),this.depth.connect(this.processor),this.processor.connect(this.lfoSplitter),this.lfoSplitter.connect(this.amplitudeL.gain,0),this.lfoSplitter.connect(this.amplitudeR.gain,1));return this};z.prototype.toString=function(){return"[SoundModule Autopanner]"};u.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,
a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "depth":if(void 0===b)return this.depth.gain.value;d=parseFloat(b);var c=0,f=this.filters[0].frequency.value;d>=c&&d<=f?this.depth.gain.value=d:l(this+' param() : The range of "'+a+'" is between '+c+" and "+f+" !!");break;case "rate":if(void 0===b)return this.rate.value;d=parseFloat(b);c=this.rate.minValue||0;f=this.rate.maxValue||1E5;d>=c&&d<=f?this.rate.value=d:l(this+' param() : The range of "'+a+'" is between '+c+" and "+f+" !!");
break;case "mix":if(void 0===b)return this.mix.gain.value;d=parseFloat(b);c=this.mix.gain.minValue||0;f=this.mix.gain.maxValue||1;d>=c&&d<=f?this.mix.gain.value=d:l(this+' param() : The range of "'+a+'" is between '+c+" and "+f+" !!");break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};u.prototype.stop=function(a,b){f.prototype.stop.call(this,a,b);if(this.isActive){this.lfo.connect(this.depth);for(var d=0,c=this.filters.length;d<
c;d++)this.depth.connect(this.filters[d].frequency)}return this};u.prototype.toString=function(){return"[SoundModule Phaser]"};y.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "depth":if(void 0===b)return this.depth.gain.value;var c=parseFloat(b),f=0,e=Math.ceil(1E3*this.delay.delayTime.value)/1E3;c>=f&&c<=e?this.depth.gain.value=c:l(this+' param() : The range of "'+
a+'" is between '+f+" and "+e+" !!");break;case "rate":if(void 0===b)return this.rate.value;c=parseFloat(b);f=this.rate.minValue||0;e=this.rate.maxValue||1E5;c>=f&&c<=e?this.rate.value=c:l(this+' param() : The range of "'+a+'" is between '+f+" and "+e+" !!");break;case "mix":case "feedback":if(void 0===b)return this[d].gain.value;c=parseFloat(b);f=this[d].gain.minValue||0;e=this[d].gain.maxValue||1;c>=f&&c<=e?this[d].gain.value=c:l(this+' param() : The range of "'+a+'" is between '+f+" and "+e+" !!");
break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};y.prototype.stop=function(a,b){f.prototype.stop.call(this,a,b);this.isActive&&(this.lfo.connect(this.depth),this.depth.connect(this.delay.delayTime));return this};y.prototype.toString=function(){return"[SoundModule Flanger]"};A.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,
"").toLowerCase(),d){case "depth":if(void 0===b)return this.depth.gain.value;var c=parseFloat(b),f=0,e=Math.ceil(100*this.delay.delayTime.value)/100;c>=f&&c<=e?this.depth.gain.value=c:l(this+' param() : The range of "'+a+'" is between '+f+" and "+e+" !!");break;case "rate":if(void 0===b)return this.rate.value;c=parseFloat(b);f=this.rate.minValue||0;e=this.rate.maxValue||1E5;c>=f&&c<=e?this.rate.value=c:l(this+' param() : The range of "'+a+'" is between '+f+" and "+e+" !!");break;case "mix":case "feedback":if(void 0===
b)return this[d].gain.value;c=parseFloat(b);f=this[d].gain.minValue||0;e=this[d].gain.maxValue||1;c>=f&&c<=e?this[d].gain.value=c:l(this+' param() : The range of "'+a+'" is between '+f+" and "+e+" !!");break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};A.prototype.stop=function(a,b){f.prototype.stop.call(this,a,b);this.isActive&&(this.lfo.connect(this.depth),this.depth.connect(this.delay.delayTime));return this};A.prototype.toString=
function(){return"[SoundModule Chorus]"};K.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "delaytime":if(void 0===b)return this.delay.delayTime.value;var c=parseFloat(b),f=this.delay.delayTime.minValue||0,e=this.delay.delayTime.maxValue||this.MAX_DELAY_TIME;c>=f&&c<=e?this.delay.delayTime.value=c:l(this+' param() : The range of "'+a+'" is between '+f+" and "+e+" !!");
break;case "dry":case "wet":case "feedback":if(void 0===b)return this[d].gain.value;c=parseFloat(b);f=this[d].gain.minValue||0;e=this[d].gain.maxValue||1;c>=f&&c<=e?this[d].gain.value=c:l(this+' param() : The range of "'+a+'" is between '+f+" and "+e+" !!");break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};K.prototype.toString=function(){return"[SoundModule Delay]"};x.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,
a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "dry":case "wet":if(void 0===b)return this[d].gain.value;var c=parseFloat(b),f=this[d].gain.minValue||0,e=this[d].gain.maxValue||1;c>=f&&c<=e?this[d].gain.value=c:l(this+' param() : The range of "'+a+'" is between '+f+" and "+e+" !!");break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};x.prototype.start=function(a,b){"[object Function]"!==Object.prototype.toString.call(b)&&
(b=function(){});this.decodeAudioData(a,function(a){this.convolver.buffer=a}.bind(this),b.bind(this));return this};x.prototype.toString=function(){return"[SoundModule Reverb]"};C.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var d in a)this.param(d,a[d]);else switch(d=String(a).replace(/-/g,"").toLowerCase(),d){case "x":case "y":case "z":if(void 0===b)return this.positions[d];var c=parseFloat(b);isNaN(c)?l(this+' param() : The type of "'+a+'" is number type !!'):
(this.positions[d]=c,this.panner.setPosition(this.positions.x,this.positions.y,this.positions.z));break;case "ox":case "oy":case "oz":if(void 0===b)return this.orientations[d.charAt(1)];c=parseFloat(b);isNaN(c)?l(this+' param() : The type of "'+a+'" is number type !!'):(this.orientations[d.charAt(1)]=c,this.panner.setOrientation(this.orientations.x,this.orientations.y,this.orientations.z));break;case "vx":case "vy":case "vz":if(void 0===b)return this.velocities[d.charAt(1)];c=parseFloat(b);isNaN(c)?
l(this+' param() : The type of "'+a+'" is number type !!'):(this.velocities[d.charAt(1)]=c,this.panner.setVelocity(this.velocities.x,this.velocities.y,this.velocities.z));break;case "refdistance":if(void 0===b)return this.panner.refDistance;c=parseFloat(b);isNaN(c)?l(this+' param() : The type of "'+a+'" is number type !!'):this.panner.refDistance=c;break;case "maxdistance":if(void 0===b)return this.panner.maxDistance;c=parseFloat(b);isNaN(c)?l(this+' param() : The type of "'+a+'" is number type !!'):
this.panner.maxDistance=c;break;case "rollofffactor":if(void 0===b)return this.panner.rolloffFactor;c=parseFloat(b);isNaN(c)?l(this+' param() : The type of "'+a+'" is number type !!'):this.panner.rolloffFactor=c;break;case "coneinnerangle":if(void 0===b)return this.panner.coneInnerAngle;c=parseFloat(b);isNaN(c)?l(this+' param() : The type of "'+a+'" is number type !!'):this.panner.coneInnerAngle=c;break;case "coneouterangle":if(void 0===b)return this.panner.coneOuterAngle;c=parseFloat(b);isNaN(c)?
l(this+' param() : The type of "'+a+'" is number type !!'):this.panner.coneOuterAngle=c;break;case "coneoutergain":if(void 0===b)return this.panner.coneOuterGain;c=parseFloat(b);isNaN(c)?l(this+' param() : The type of "'+a+'" is number type !!'):this.panner.coneOuterGain=c;break;case "panningmodel":if(void 0===b)return this.panner.panningModel;c=/HRTF/i.test(b)?String(b).toUpperCase():String(b).toLowerCase();d={equalpower:this.panner.EQUALPOWER,HRTF:this.panner.HRTF};c in d?this.panner.panningModel=
"[object String]"===Object.prototype.toString.call(this.panner.panningModel)?c:d[c]:l(this+' param() : The value of "'+a+'" is either "equalpower" or "HRTF" !!');break;case "distancemodel":if(void 0===b)return this.panner.distanceModel;c=String(b).replace(/-/g,"").toLowerCase();d={linear:this.panner.LINEAR_DISTANCE,inverse:this.panner.INVERSE_DISTANCE,exponential:this.panner.EXPONENTIAL_DISTANCE};c in d?this.panner.distanceModel="[object String]"===Object.prototype.toString.call(this.panner.distanceModel)?
c:d[c]:l(this+' param() : The value of "'+a+'" is one of "linear", "inverse", "exponential" !!');break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};C.prototype.toString=function(){return"[SoundModule Panner]"};B.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var c in a)this.param(c,a[c]);else switch(c=String(a).replace(/-/g,"").toLowerCase(),c){case "attack":case "decay":case "sustain":case "release":if(void 0===
b)return this[c];var f=parseFloat(b);0<=f?this[c]=f:l(this+' param() : The type of "'+a+'" is greater than or equal 0 !!');break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};B.prototype.isStop=function(){for(var a=[],b=0,c=this.activeIndexes.length;b<c;b++){var f=this.activeIndexes[b];if(void 0!==f){if(0.001<this.generators[f].gain.value)return!1;a.push(f);if(a.length===this.activeCounter)return!0}}};B.prototype.ready=function(a,
b,c){a=0<=parseInt(a)?parseInt(a):0;b.connect(this.generators[a]);this.generators[a].connect(c);this.activeIndexes[a]=a;this.activeCounter++;return this};B.prototype.start=function(a){a=parseFloat(a);if(isNaN(a)||a<this.context.currentTime)a=this.context.currentTime;for(var b=a+this.attack,c=this.decay,f=this.sustain,e=0,g=this.activeIndexes.length;e<g;e++){var k=this.activeIndexes[e];void 0!==k&&(this.generators[k].gain.cancelScheduledValues(a),this.generators[k].gain.setValueAtTime(0,a),this.generators[k].gain.linearRampToValueAtTime(1,
b),this.generators[k].gain.setTargetAtTime(f,b,c))}return this};B.prototype.stop=function(a){a=parseFloat(a)-this.release;if(isNaN(a)||a<this.context.currentTime)a=this.context.currentTime;for(var b=this.release,c=0,f=this.activeIndexes.length;c<f;c++){var e=this.activeIndexes[c];void 0!==e&&(this.generators[e].gain.cancelScheduledValues(a),this.generators[e].gain.setValueAtTime(this.generators[e].gain.value,a),this.generators[e].gain.setTargetAtTime(0,a,b))}return this};B.prototype.clear=function(){this.activeIndexes=
[];this.activeCounter=0;return this};B.prototype.toString=function(){return"[OscillatorModule EnvelopeGenerator]"}}function x(a){function c(a){this.context=a;this.frequencies={start:-1,end:0};this.time=this.rate=0;this.type="linear"}u.call(this,a);this.sources=[];this.times={start:0,stop:0};this.isAnalyser=!1;this.glide=new c(a);c.prototype.param=function(a,c){if("[object Object]"===Object.prototype.toString.call(a))for(var g in a)this.param(g,a[g]);else switch(g=String(a).replace(/-/g,"").toLowerCase(),
g){case "time":if(void 0===c)return this.time;g=parseFloat(c);0<=g?this.time=g:l(this+' param() : The range of "'+a+'" is greater than or equal 0 !!');break;case "type":if(void 0===c)return this.type;g=String(c).toLowerCase();"linear"===g||"exponential"===g?this.type=g:l(this+' param() : The value of "'+a+'" is either "linear" or "exponential" !!');break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};c.prototype.ready=function(a){this.frequencies.end=
a;a=-1===this.frequencies.start?0:this.frequencies.end-this.frequencies.start;-1===this.frequencies.start||0===this.time||0===a?this.frequencies.start=this.frequencies.end:this.rate=a/this.time;return this};c.prototype.start=function(a,c){var g=parseFloat(c);if(isNaN(g)||g<this.context.currentTime)g=this.context.currentTime;var k=g+this.time;a.frequency.cancelScheduledValues(g);a.frequency.setValueAtTime(this.frequencies.start,g);a.frequency[this.type+"RampToValueAtTime"](this.frequencies.end,k);
return this};c.prototype.stop=function(){this.frequencies.start=this.frequencies.end;return this};c.prototype.toString=function(){return"[OscillatorModule Glide]"}}function C(a){u.call(this,a);this.sources=[];this.resources=[];this.buffers=[];this.volumes=[];this.isStops=[];this.settings=[];this.times={start:0,stop:0};this.isStop=!0;this.isAnalyser=!1}function y(a){function c(){this.depth=0}u.call(this,a);this.source=a.createBufferSource();this.buffer=null;this.currentTime=0;this.paused=!0;this.callbacks=
{decode:function(){},ready:function(){},start:function(){},stop:function(){},update:function(){},ended:function(){},error:function(){}};this.vocalcanceler=new c;c.prototype.param=function(a,c){if("[object Object]"===Object.prototype.toString.call(a))for(var g in a)this.param(g,a[g]);else switch(g=String(a).replace(/-/g,"").toLowerCase(),g){case "depth":if(void 0===c)return this.depth;g=parseFloat(c);0<=g&&1>=g?this.depth=g:l(this+" param() : The range of "+a+" is between 0 and 1 !!");break;default:l(this+
' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};c.prototype.start=function(a,c){return a-this.depth*c}}function A(a){y.call(this,a);this.media=this.source=null;this.ex="";this.duration=0;this.playbackRate=1;this.muted=this.loop=this.controls=!1;this.callbacks={loadstart:function(){}}}function I(a){u.call(this,a);this.sources=[];this.isAnalyser=!1}function G(a){this.context=a;this.source=null;this.sequences=[];this.timerids=[];this.prev=[];this.callbacks=
{start:function(){},stop:function(){},ended:function(){},error:function(){}}}var s,O=v.AudioContext||v.webkitAudioContext?!0:!1,F=v.webkitAudioContext?!0:!1,J=2,l=function(a){switch(J){case 1:console.trace();alert(a);break;case 2:console.trace();console.error(a);break;case 3:throw console.trace(),Error(a);}},D=_implement=function(a){if(Object.create)return Object.create(a);var c=function(){};c.prototype=a;return new c};L.prototype.state=function(a){if(void 0===a)return this.isActive;"toggle"===String(a).toLowerCase()?
this.isActive=!this.isActive:this.isActive=Boolean(a);return this};var Q=function(a){switch(String(a).toUpperCase()){case "NONE":case "0":this.ERROR_MODE=J=0;break;case "ALERT":case "1":this.ERROR_MODE=J=1;break;case "CONSOLE":case "2":this.ERROR_MODE=J=2;break;case "EXCEPTION":case "3":this.ERROR_MODE=J=3}},R=function(a,c,b,e,g){if("[object Object]"===Object.prototype.toString.call(a)){var k=a;"file"in k&&(a=k.file);"type"in k&&(c=k.type);"success"in k&&(b=k.success);"error"in k&&(e=k.error);"progress"in
k&&(g=k.progress)}if(a instanceof Blob){var f=new FileReader;f.onprogress=function(a){"[object Function]"===Object.prototype.toString.call(g)&&g(a)};f.onerror=function(a){if("[object Function]"===Object.prototype.toString.call(e)){var b="";switch(f.error.code){case f.error.NOT_FOUND_ERR:b="NOT_FOUND_ERR";break;case f.error.SECURITY_ERR:b="SECURITY_ERR";break;case f.error.ABORT_ERR:b="ABORT_ERR";break;case f.error.NOT_READABLE_ERR:b="NOT_READABLE_ERR";break;case f.error.ENCODING_ERR:b="ENCODING_ERR";
break;default:b="ERR"}e(a,b)}};f.onload=function(a){if("[object Function]"===Object.prototype.toString.call(b)){var c=f.result;"[object String]"===Object.prototype.toString.call(c)&&-1===c.indexOf("data:")&&-1===c.indexOf("blob:")&&(c=c.replace(/<(\/?script.*?)>/gi,"&lt;$1&gt;"));b(a,c)}};/arraybuffer/i.test(c)?f.readAsArrayBuffer(a):/dataurl/i.test(c)?f.readAsDataURL(a):/text/i.test(c)?f.readAsText(a,"UTF-8"):l(this+' read() : The 1st argument is one of "ArrayBuffer", "DataURL", "Text". !!')}else"[object Function]"===
Object.prototype.toString.call(e)&&e(null,"FILE_IS_NOT_BLOB")},S=function(a,c,b,e,g){if("[object Object]"===Object.prototype.toString.call(a)){var k=a;"event"in k&&(a=k.event);"type"in k&&(c=k.type);"success"in k&&(b=k.success);"error"in k&&(e=k.error);"progress"in k&&(g=k.progress)}if(a instanceof Event){k=null;if("drop"===a.type)a.stopImmediatePropagation(),a.preventDefault(),k=a.dataTransfer.files[0];else if("change"===a.type&&"files"in a.target)k=a.target.files[0];else{l(this+' file() : The event object is either "drop" or file form\'s "change" !!');
return}if(k instanceof File){if(/text/i.test(c)&&-1===k.type.indexOf("text"))throw Error("Please upload text file !!");if(/arraybuffer|dataurl/i.test(c)&&-1===k.type.indexOf("audio"))throw Error("Please upload audio file !!");this.read({file:k,type:c,success:b,error:e,progress:g});return k}throw Error("Please upload file !!");}l(this+" file() : The 1st argument is event object !!")},T=function(a,c,b,e,g){if("[object Object]"===Object.prototype.toString.call(a)){var k=a;"url"in k&&(a=k.url);"timeout"in
k&&(c=k.timeout);"success"in k&&(b=k.success);"error"in k&&(e=k.error);"progress"in k&&(g=k.progress)}var f=new XMLHttpRequest;void 0===F||F?f.responseType="arraybuffer":f.overrideMimeType("text/plain; charset=x-user-defined");c=parseInt(c);var l=v.setTimeout(function(){f.abort();"[object Function]"===Object.prototype.toString.call(e)&&e(f,"timeout")},0<c?c:6E4);f.onreadystatechange=function(){f.readyState===f.LOADING&&"[object Function]"===Object.prototype.toString.call(g)&&g(f);if(f.readyState===
f.DONE&&(v.clearTimeout(l),200===f.status)){var c=null;if(void 0===F||F)c=f.response,c instanceof ArrayBuffer&&"[object Function]"===Object.prototype.toString.call(b)&&b(f,c);else{for(var k=f.responseText,t=[],s=0,E=k.length;s<E;s++)t.push(k.charCodeAt(s)&255);var k="audio/"+a.slice(-3),t=new Blob([new Uint8Array(t)],{type:k}),u=new FileReader;u.readAsArrayBuffer(t);u.onerror=function(a){if("[object Function]"===Object.prototype.toString.call(e)){var b="";switch(u.error.code){case u.error.NOT_FOUND_ERR:b=
"NOT_FOUND_ERR";break;case u.error.SECURITY_ERR:b="SECURITY_ERR";break;case u.error.ABORT_ERR:b="ABORT_ERR";break;case u.error.NOT_READABLE_ERR:b="NOT_READABLE_ERR";break;case u.error.ENCODING_ERR:b="ENCODING_ERR";break;default:b="ERR"}e(a,b)}};u.onload=function(){c=u.result;c instanceof ArrayBuffer&&"[object Function]"===Object.prototype.toString.call(b)&&b(f,c)}}}};f.onerror=function(){"[object Function]"===Object.prototype.toString.call(e)&&e(f,"error")};f.open("GET",a,!0);f.send(null)},U=function(a){var c=
Math.pow(2,1/12);Array.isArray(a)||(a=[a]);for(var b=Array(a.length),e=0,g=a.length;e<g;e++){var k=parseInt(a[e]);b[e]=0<=k?27.5*Math.pow(c,k):0}return b},V=function(a){a=parseFloat(a);if(0<=a)return{minutes:Math.floor(a/60),seconds:Math.floor(a%60)};l(this+" convertTime() : The range of the 1st argument is between 0 and audio duration !!")},W=function(a){v.X===s&&(v.X=void 0);a&&v.XSound===s&&(v.XSound=void 0);return s};B.prototype.setup=function(a,c,b,e){if("[object Object]"===Object.prototype.toString.call(a)){var g=
a;"id"in g&&(a=g.id);"type"in g&&(c=g.type);"formats"in g&&(b=g.formats);"callbacks"in g&&(e=g.callbacks)}g=String(a);c="video"!==String(c).toLowerCase()?"audio":"video";this.media=null!==a&&""!==g?document.getElementById(g):document.createElement(c);if(this.media instanceof HTMLMediaElement){Array.isArray(b)||(b=[b]);a=0;for(g=b.length;a<g;a++){var k=c+"/"+String(b[a]).toLowerCase();if(/^(?:maybe|probably)/.test(this.media.canPlayType(k))){this.ex=b[a];break}}if(""===this.ex)throw Error("Media format that can be played does not exist !!");
if("[object Object]"===Object.prototype.toString.call(e))for(var f in e)this.callbacks[f.toLowerCase()]="[object Function]"===Object.prototype.toString.call(e[f])?e[f]:function(){};var n=this;for(f in this.callbacks)switch(f){case "loadedmetadata":this.media.addEventListener("loadedmetadata",function(a){n.duration=this.duration;n.callbacks.loadedmetadata(a,this)},!1);break;default:this.media.addEventListener(f,function(a){n.callbacks[a.type.toLowerCase()](a,this)},!1)}return this}this.media=null;
l(this+" setup() : The media element that has the designated ID does not exists !!")};B.prototype.param=function(a,c){if("[object Object]"===Object.prototype.toString.call(a))for(var b in a)this.param(b,a[b]);else switch(b=String(a).replace(/-/g,"").toLowerCase(),b){case "mastervolume":if(void 0===c)return this.media instanceof HTMLMediaElement?this.media.volume:this.volume;var e=parseFloat(c),g=0;b=1;e>=g&&e<=b?(this.media instanceof HTMLMediaElement&&(this.media.volume=e),this.volume=e):l(this+
" param() : The range of "+a+" is between "+g+" and "+b+" !!");break;case "playbackrate":if(void 0===c)return this.media instanceof HTMLMediaElement?this.media.playbackRate:this.playbackRate;e=parseFloat(c);0.5<=e?(this.media instanceof HTMLMediaElement&&(this.media.playbackRate=e),this.playbackRate=e):l(this+" param() : The range of "+a+" is greater than or equal 0.5 !!");break;case "currenttime":if(void 0===c)return this.media instanceof HTMLMediaElement?this.media.currentTime:0;e=parseFloat(c);
if(this.media instanceof HTMLMediaElement)g=0,b=this.duration;else return;e>=g&&e<=b?this.media.currentTime=e:l(this+" param() : The range of "+a+" is between "+g+" and "+b+" !!");break;case "loop":case "muted":case "controls":if(void 0===c)return this.media instanceof HTMLMediaElement?this.media[b]:this[b];this.media instanceof HTMLMediaElement&&(this.media[b]=Boolean(c));this[b]=Boolean(c);break;case "width":case "height":if(void 0===c)return this.media instanceof HTMLVideoElement?this.media[b]:
0;e=parseInt(c);g=0;e>=g?this.media instanceof HTMLVideoElement&&(this.media[b]=e):l(this+" param() : The range of "+a+" is greater than or equal "+g+" !!");break;case "duration":return this.duration;case "channels":return;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};B.prototype.ready=function(a){a=String(a);try{-1!==a.indexOf("data:")||-1!==a.indexOf("blob:")?this.media.src=a:this.media.src=a+"."+this.ex}catch(c){throw Error("The designated resource cannot be loaded !!");
}return this};B.prototype.start=function(a){this.media instanceof HTMLMediaElement&&this.media.paused&&(this.media.play(),a=parseFloat(a),this.media.currentTime=0<=a&&a<=this.duration?a:0,this.media.playbackRate=this.playbackRate,this.media.controls=this.controls,this.media.loop=this.loop,this.media.muted=this.muted);return this};B.prototype.stop=function(){this.media instanceof HTMLMediaElement&&!this.media.paused&&this.media.pause();return this};B.prototype.toggle=function(a){this.media instanceof
HTMLMediaElement&&(this.media.paused?this.start(a):this.stop());return this};B.prototype.getMedia=function(){return this.media};B.prototype.isMedia=function(){return this.media instanceof HTMLMediaElement?!0:!1};B.prototype.isSource=function(){return this.isMedia()};B.prototype.isPaused=function(){return this.media instanceof HTMLMediaElement?this.media.paused:!0};B.prototype.fullscreen=function(){if(this.media instanceof HTMLVideoElement)if(this.media.webkitRequestFullscreen)this.media.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
else if(this.media.mozRequestFullScreen)this.media.mozRequestFullScreen();else if(this.media.requestFullscreen)this.media.requestFullscreen();else throw Error("Cannot change to full screen !!");return this};B.prototype.exitFullscreeen=function(){if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullscreen)document.mozCancelFullscreen();else if(document.exitFullscreen)document.exitFullscreen();else throw Error("Cannot exit from full screen !!");return this};
B.prototype.toString=function(){return"[MediaFallbackModule]"};if(O){v.AudioContext=v.AudioContext||v.webkitAudioContext;audiocontext=new AudioContext;audiocontext.createScriptProcessor=audiocontext.createScriptProcessor||audiocontext.createJavaScriptNode;audiocontext.createGain=audiocontext.createGain||audiocontext.createGainNode;audiocontext.createDelay=audiocontext.createDelay||audiocontext.createDelayNode;audiocontext.createPeriodicWave=audiocontext.createPeriodicWave||audiocontext.createWaveTable;
u.prototype.setup=function(){};u.prototype.param=function(a,c){switch(String(a).replace(/-/g,"").toLowerCase()){case "mastervolume":if(void 0===c)return this.masterVolume.gain.value;var b=parseFloat(c),e=this.masterVolume.gain.minValue||0,g=this.masterVolume.gain.maxValue||1;b>=e&&b<=g?this.masterVolume.gain.value=b:l(this+" param() : The range of "+a+" is between "+e+" and "+g+" !!")}};u.prototype.ready=function(){};u.prototype.start=function(){};u.prototype.stop=function(){};u.prototype.get=function(){};
u.prototype.resize=function(a){u.call(this,audiocontext,a);return this};u.prototype.connect=function(a,c){Array.isArray(c)&&(this.nodes=c);for(var b=[],e=0,g=this.nodes.length;e<g;e++)this.nodes[e].isActive?b.push(this.nodes[e]):this.nodes[e].output.disconnect(0);a.disconnect(0);0<b.length?a.connect(b[0].input):a.connect(this.masterVolume);e=0;for(g=b.length;e<g;e++)b[e].output.disconnect(0),e<b.length-1?b[e].output.connect(b[e+1].input):b[e].output.connect(this.masterVolume);this.masterVolume.connect(this.analyser.input);
this.analyser.output.connect(this.context.destination);this.masterVolume.connect(this.recorder.processor);this.recorder.processor.connect(this.context.destination);this.masterVolume.connect(this.session.sender);this.session.sender.connect(this.context.destination);return this};u.prototype.module=function(a){var c=String(a).replace(/-/g,"").toLowerCase();switch(c){case "listener":case "analyser":case "recorder":case "session":case "compressor":case "distortion":case "wah":case "equalizer":case "filter":case "tremolo":case "ringmodulator":case "autopanner":case "phaser":case "flanger":case "chorus":case "delay":case "reverb":case "panner":return this[c];
case "eg":if(c in this)return this[c];case "glide":if(c in this)return this[c];case "vocalcanceler":if(c in this)return this[c];default:for(var b=0,e=this.plugins.length;b<e;b++)if(c===this.plugins[b].name)return this.plugins[b].plugin;l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}};u.prototype.install=function(a,c){"[object Function]"===Object.prototype.toString.call(c)?(c.prototype=new this.Effector(audiocontext,this.BUFFER_SIZE),this.plugins.push({name:String(a).toLowerCase(),
plugin:new c(audiocontext)})):l(this+" install() : The 1st argument is class (function) for created effector !!");return this};u.prototype.toString=function(){return"[SoundModule]"};x.prototype=D(u.prototype);x.prototype.constructor=x;x.prototype.setup=function(a){function c(a,b){this.isActive=Boolean(b);this.context=a;this.source=a.createOscillator();this.source.start=this.source.start||this.source.noteOn;this.source.stop=this.source.stop||this.source.noteOff;this.volume=a.createGain();this.isStop=
!0;this.fine=this.octave=0}c.prototype=_implement(L.prototype);c.prototype.constructor=c;Array.isArray(a)||(a=[a]);for(var b=0,e=a.length;b<e;b++)this.sources[b]=new c(this.context,Boolean(a[b])),this.eg.generators[b]=this.context.createGain(),this.eg.generators[b].gain.setTargetAtTime=this.eg.generators[b].gain.setTargetAtTime||this.eg.generators[b].gain.setTargetValueAtTime;c.prototype.param=function(a,b){if("[object Object]"===Object.prototype.toString.call(a))for(var c in a)this.param(c,a[c]);
else switch(c=String(a).replace(/-/g,"").toLowerCase(),c){case "type":if(void 0===b)return this.type;c=String(b).toLowerCase();this.source.SINE=this.source.SINE||0;this.source.SQUARE=this.source.SQUARE||1;this.source.SAWTOOTH=this.source.SAWTOOTH||2;this.source.TRIANGLE=this.source.TRIANGLE||3;var e={sine:this.source.SINE,square:this.source.SQUARE,sawtooth:this.source.SAWTOOTH,triangle:this.source.TRIANGLE};c in e?this.source.type="[object String]"===Object.prototype.toString.call(this.source.type)?
c:e[c]:l(this+' param() : The value of "'+a+'" is one of "sine", "square", "sawtooth", "triangle" !!');break;case "octave":if(void 0===b)return this.octave;c=this.octave=parseFloat(b);var e=(this.source.detune.minValue||-4800)/1200,q=(this.source.detune.maxValue||4800)/1200;c>=e&&c<=q?this.source.detune.value=this.fine+1200*c:l(this+" param() : The range of "+a+" is between "+e+" and "+q+" !!");break;case "fine":if(void 0===b)return this.fine;c=this.fine=parseFloat(b);e=-1200;q=1200;c>=e&&c<=q?this.source.detune.value=
c+1200*this.octave:l(this+" param() : The range of "+a+" is between "+e+" and "+q+" !!");break;case "volume":case "gain":if(void 0===b)return this.volume.gain.value;c=parseFloat(b);e=this.volume.gain.minValue||0;q=this.volume.gain.maxValue||1;c>=e&&c<=q?this.volume.gain.value=c:l(this+" param() : The range of "+a+" is between "+e+" and "+q+" !!");break;default:l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}return this};c.prototype.start=function(a,
b){if(this.isActive){var c=this.source.type,e=this.source.frequency.value,l=this.source.detune.value;this.isStop||(this.source.stop(this.context.currentTime),this.source.disconnect(0));this.source=this.context.createOscillator();this.source.start=this.source.start||this.source.noteOn;this.source.stop=this.source.stop||this.source.noteOff;this.source.type=c;this.source.frequency.value=e;this.source.detune.value=l;this.volume.connect(a);this.source.start(b);this.isStop=!1}else this.isStop||(this.source.stop(this.context.currentTime),
this.isStop=!0),this.source.disconnect(0);return this};c.prototype.stop=function(a){this.isStop||(this.source.stop(a),this.source.disconnect(0),this.isStop=!0);return this};c.prototype.toString=function(){return"[OscillatorModule Oscillator]"};return this};x.prototype.param=function(a,c){if("[object Object]"===Object.prototype.toString.call(a))for(var b in a)this.param(b,a[b]);else{b=String(a).replace(/-/g,"").toLowerCase();var e=u.prototype.param.call(this,b,c)}return void 0===e?this:e};x.prototype.ready=
function(a,c){var b=parseFloat(a),e=parseFloat(c);0<b&&(this.times.start=b);e>b&&(this.times.stop=e);return this};x.prototype.start=function(a,c,b){var e=this.context.currentTime+this.times.start;Array.isArray(a)||(a=[a]);if(a.length<this.sources.length)for(var g=this.sources.length-a.length,k=0;k<g;k++)a.push(0);k=0;for(g=a.length;k<g;k++){var f=parseFloat(a[k]);a[k]=0<=f?f:0}this.eg.clear();this.processor.disconnect(0);this.processor.onaudioprocess=null;this.connect(this.processor,c);k=0;for(g=
this.sources.length;k<g;k++)c=this.sources[k],f=a.shift(),c.start(this.processor,e),this.eg.ready(k,c.source,c.volume),this.glide.ready(f).start(c.source,e);this.eg.start(e);this.chorus.start(e);this.flanger.start(e);this.phaser.start(e);this.autopanner.start(e);this.tremolo.start(e);this.ringmodulator.start(e);this.wah.start(e);this.filter.start(e);k=0;for(g=this.plugins.length;k<g;k++)this.plugins[k].plugin.start(e);this.isAnalyser||(this.analyser.start("time"),this.analyser.start("fft"),this.isAnalyser=
!0);"[object Function]"===Object.prototype.toString.call(b)?this.processor.onaudioprocess=b:this.processor.onaudioprocess=function(a){var b=a.inputBuffer.getChannelData(0),c=a.inputBuffer.getChannelData(1),f=a.outputBuffer.getChannelData(0);a=a.outputBuffer.getChannelData(1);f.set(b);a.set(c)};return this};x.prototype.stop=function(a){var c=this.context.currentTime+this.times.stop;this.eg.stop(c);this.glide.stop();this.filter.stop(c);for(var b=0,e=this.plugins.length;b<e;b++)this.plugins[b].plugin.stop(c,
this.eg.release);var g=this;void 0===F||F||v.setTimeout(function(){for(var a=g.context.currentTime,b=0,c=g.sources.length;b<c;b++)g.sources[b].stop(a);g.chorus.stop(a);g.flanger.stop(a);g.phaser.stop(a);g.autopanner.stop(a);g.tremolo.stop(a);g.ringmodulator.stop(a);g.wah.stop(a);g.analyser.stop("time");g.analyser.stop("fft");g.isAnalyser=!1;g.processor.disconnect(0);g.processor.onaudioprocess=null},1E3*(this.times.stop+this.eg.release));"[object Function]"===Object.prototype.toString.call(a)?this.processor.onaudioprocess=
a:this.processor.onaudioprocess=function(a){var b=a.inputBuffer.getChannelData(0),c=a.inputBuffer.getChannelData(1),e=a.outputBuffer.getChannelData(0);a=a.outputBuffer.getChannelData(1);e.set(b);a.set(c);if(g.eg.isStop()){b=g.context.currentTime;c=0;for(e=g.sources.length;c<e;c++)g.sources[c].stop(b);g.chorus.stop(b);g.flanger.stop(b);g.phaser.stop(b);g.autopanner.stop(b);g.tremolo.stop(b);g.ringmodulator.stop(b);g.wah.stop(b);g.analyser.stop("time");g.analyser.stop("fft");g.isAnalyser=!1;this.disconnect(0);
this.onaudioprocess=null}};return this};x.prototype.get=function(a){a=parseInt(a);if(0<=a&&a<this.sources.length)return this.sources[a].source;a=Array(this.sources.length);for(var c=0,b=this.sources.length;c<b;c++)a[c]=this.sources[c].source;return a};x.prototype.length=function(){return this.sources.length};x.prototype.toString=function(){return"[OscillatorModule]"};C.prototype=D(u.prototype);C.prototype.constructor=C;C.prototype.setup=function(a,c,b,e,g,k){if("[object Object]"===Object.prototype.toString.call(a)){var f=
a;"resources"in f&&(a=f.resources);"settings"in f&&(c=f.settings);"timeout"in f&&(b=f.timeout);"success"in f&&(e=f.success);"error"in f&&(g=f.error);"progress"in f&&(k=f.progress)}Array.isArray(a)||(a=[a]);this.resources=a;Array.isArray(c)||(c=[c]);this.buffers.length=a.length;a=0;for(f=c.length;a<f;a++){if("buffer"in c[a])if(f=parseInt(c[a].buffer),0<=f&&f<this.buffers.length)c[a].buffer=f;else{l(this+' setup() : The "buffer" property in the 2nd argument is number type between 0 and '+(this.buffers.length-
1)+" !!");return}else{l(this+' setup() : The element of array in the 2nd argument  requires "buffer" property !!');return}c[a].rate="rate"in c[a]&&0<=c[a].rate?parseFloat(c[a].rate):1;c[a].loop="loop"in c[a]?Boolean(c[a].loop):!1;c[a].start="start"in c[a]&&0<=c[a].start?parseFloat(c[a].start):0;c[a].end="end"in c[a]&&0<=c[a].end?parseFloat(c[a].end):0;c[a].volume="volume"in c[a]&&0<=c[a].volume&&1>=c[a].volume?parseFloat(c[a].volume):1;a=0;for(f=c.length;a<f;a++)this.isStops[a]=!0,this.volumes[a]=
this.context.createGain(),this.eg.generators[a]=this.context.createGain(),this.eg.generators[a].gain.setTargetAtTime=this.eg.generators[a].gain.setTargetAtTime||this.eg.generators[a].gain.setTargetValueAtTime;this.settings=c}var n=parseInt(b),q=!1,p=this;c=function(a,b){var c=new XMLHttpRequest;void 0===F||F?c.responseType="arraybuffer":c.overrideMimeType("text/plain; charset=x-user-defined");var f=v.setTimeout(function(){c.abort();q||"[object Function]"!==Object.prototype.toString.call(g)||g(c,"timeout");
q=!0},0<n?n:6E4);c.onreadystatechange=function(){if(q)c.abort();else if(c.readyState===c.LOADING)"[object Function]"===Object.prototype.toString.call(k)&&k(c);else if(c.readyState===c.DONE&&(v.clearTimeout(f),200===c.status)){var l=null,n=function(a){a instanceof ArrayBuffer&&p.context.decodeAudioData(a,function(a){p.buffers[b]=a;a=0;for(var c=p.buffers.length;a<c;a++)if(void 0===p.buffers[a])return;"[object Function]"===Object.prototype.toString.call(e)&&e.call(p,p.buffers)},function(){"[object Function]"===
Object.prototype.toString.call(g)&&g(null,"decode")})};if(void 0===F||F)l=c.response,n.call(p,l);else{for(var s=c.responseText,u=[],y=0,A=s.length;y<A;y++)u.push(s.charCodeAt(y)&255);var s="audio/"+a.slice(-3),u=new Blob([new Uint8Array(u)],{type:s}),x=new FileReader;x.readAsArrayBuffer(u);x.onerror=function(a){if("[object Function]"===Object.prototype.toString.call(g)){var b="";switch(x.error.code){case x.error.NOT_FOUND_ERR:b="NOT_FOUND_ERR";break;case x.error.SECURITY_ERR:b="SECURITY_ERR";break;
case x.error.ABORT_ERR:b="ABORT_ERR";break;case x.error.NOT_READABLE_ERR:b="NOT_READABLE_ERR";break;case x.error.ENCODING_ERR:b="ENCODING_ERR";break;default:b="ERR"}g(a,b)}};x.onload=function(){l=x.result;n.call(p,l)}}}};c.onerror=function(){q||"[object Function]"!==Object.prototype.toString.call(g)||g(c,"error");q=!0};c.open("GET",a,!0);c.send(null)};a=0;for(f=this.resources.length;a<f;a++)"[object String]"===Object.prototype.toString.call(this.resources[a])?c.call(this,this.resources[a],a):this.resources[a]instanceof
AudioBuffer&&(this.buffers[a]=this.resources[a],a===f-1&&e.call(this,this.buffers));return this};C.prototype.param=function(a,c){if("[object Object]"===Object.prototype.toString.call(a))for(var b in a)this.param(b,a[b]);else{b=String(a).replace(/-/g,"").toLowerCase();var e=u.prototype.param.call(this,b,c)}return void 0===e?this:e};C.prototype.ready=function(a,c){var b=parseFloat(a),e=parseFloat(c);0<b&&(this.times.start=b);e>b&&(this.times.stop=e);return this};C.prototype.start=function(a,c,b){if(0<=
a&&a<this.settings.length){var e=parseInt(a),g=this.settings[e].buffer,k=this.settings[e].rate,f=this.settings[e].loop,n=this.settings[e].start,q=this.settings[e].end,p=this.settings[e].volume;if(void 0!==this.buffers[g]){void 0!==this.sources[e]&&(this.sources[e].stop(this.context.currentTime),this.sources[e].disconnect(0),delete this.sources[e]);a=this.context.createBufferSource();a.start=a.start||a.noteGrainOn;a.stop=a.stop||a.noteOff;a.buffer=this.buffers[g];a.playbackRate.value=k;a.loop=f;a.loopStart=
n;a.loopEnd=q;this.volumes[e].gain.value=p;this.eg.ready(e,a,this.volumes[e]);this.volumes[e].connect(this.processor);this.connect(this.processor,c);c=this.context.currentTime+this.times.start;a.start(c);this.sources[e]=a;this.eg.start(c);this.chorus.start(c);this.flanger.start(c);this.phaser.start(c);this.autopanner.start(c);this.tremolo.start(c);this.ringmodulator.start(c);this.wah.start(c);this.filter.start(c);g=0;for(k=this.plugins.length;g<k;g++)this.plugins[g].plugin.start(c);this.isAnalyser||
(this.analyser.start("time"),this.analyser.start("fft"),this.isAnalyser=!0);this.isStops[e]=!1;var t=this;a.onended=function(){t.isStops[e]=!0};"[object Function]"===Object.prototype.toString.call(b)?this.processor.onaudioprocess=b:this.processor.onaudioprocess=function(a){t.isStop=t.isStops.every(function(a,b,c){return a});if(t.isStop){var b=t.context.currentTime;t.chorus.stop(b);t.flanger.stop(b);t.phaser.stop(b);t.autopanner.stop(b);t.tremolo.stop(b);t.ringmodulator.stop(b);t.wah.stop(b);t.eg.clear();
t.analyser.stop("time");t.analyser.stop("fft");t.isAnalyser=!1;this.disconnect(0);this.onaudioprocess=null}else{var b=a.inputBuffer.getChannelData(0),c=a.inputBuffer.getChannelData(1),e=a.outputBuffer.getChannelData(0);a=a.outputBuffer.getChannelData(1);e.set(b);a.set(c)}};return this}}else l(this+" start() : The 1st argument is number type between 0 and "+(this.settings.length-1)+" !!")};C.prototype.stop=function(a){if(0<=a&&a<this.settings.length){if(a=parseInt(a),void 0!==this.buffers[this.settings[a].buffer]&&
void 0!==this.sources[a]){a=this.context.currentTime+this.times.stop;this.eg.stop(a);this.filter.stop(a);for(var c=0,b=this.plugins.length;c<b;c++)this.plugins[c].plugin.stop(a,this.eg.release);return this}}else l(this+" stop() : The 1st argument is number type between 0 and "+(this.settings.length-1)+" !!")};C.prototype.get=function(a){a=parseInt(a);return 0<=a&&a<this.buffers.length?this.buffers[a]:this.buffers};C.prototype.toString=function(){return"[OneshotModule]"};y.prototype=D(u.prototype);
y.prototype.constructor=y;y.prototype.setup=function(a,c){if("[object Object]"===Object.prototype.toString.call(a))for(var b in a)this.setup(b,a[b]);else b=String(a).replace(/-/g,"").toLowerCase(),b in this.callbacks?"[object Function]"===Object.prototype.toString.call(c)?this.callbacks[b]=c:l(this+' setup() : The type of "'+a+'" is function !!'):l(this+' setup() : The designated property ("'+a+'") does not exist in accessible properties !!');return this};y.prototype.param=function(a,c){if("[object Object]"===
Object.prototype.toString.call(a))for(var b in a)this.param(b,a[b]);else{b=String(a).replace(/-/g,"").toLowerCase();var e=u.prototype.param.call(this,b,c);if(void 0!==e)return e;switch(b){case "playbackrate":if(void 0===c)return this.source.playbackRate.value;b=parseFloat(c);var e=this.source.playbackRate.minValue||0,g=this.source.playbackRate.maxValue||1024;b>=e&&b<=g?this.source.playbackRate.value=b:l(this+" param() : The range of "+a+" is between "+e+" and "+g+" !!");break;case "loop":case "looping":if(void 0===
c)return this.source.loop;this.source.loop=Boolean(c);break;case "currenttime":if(void 0===c)return this.currentTime;b=parseFloat(c);if(this.buffer instanceof AudioBuffer)g=this.buffer.duration,e=0;else{this.currentTime=0;break}b>=e&&b<=g?this.paused?(this.stop(),this.currentTime=b):(this.stop(),this.start(b)):l(this+" param() : The range of "+a+" is between "+e+" and "+g+" !!");break;case "duration":return this.buffer instanceof AudioBuffer?this.buffer.duration:0;case "samplerate":return this.buffer instanceof
AudioBuffer?this.buffer.sampleRate:this.SAMPLE_RATE;case "channels":return this.buffer instanceof AudioBuffer?this.buffer.numberOfChannels:0;default:"mastervolume"!==b&&l(this+' param() : The designated property ("'+a+'") does not exist in accessible properties !!')}}return this};y.prototype.ready=function(a){a instanceof ArrayBuffer?(this.context.decodeAudioData(a,function(a){this.buffer=a;this.analyser.start("time-all-L",a);this.analyser.start("time-all-R",a);this.callbacks.ready(a)}.bind(this),
this.callbacks.error.bind(this)),this.callbacks.decode(a)):l(this+" ready() : The 1st argument is ArrayBuffer for audio !!");return this};y.prototype.start=function(a,c,b){if(this.buffer instanceof AudioBuffer&&this.paused){var e=this.context.currentTime;a=parseFloat(a);this.currentTime=0<=a&&a<=this.buffer.duration?a:0;var g=this.source.playbackRate.value,k=this.source.loop;this.source=this.context.createBufferSource();this.source.start=this.source.start||this.source.noteGrainOn;this.source.stop=
this.source.stop||this.source.noteOff;this.source.buffer=this.buffer;this.source.playbackRate.value=g;this.source.loop=k;void 0===F||F?(this.source.connect(this.processor),this.connect(this.processor,c)):this.connect(this.source,c);this.source.start(e,a,this.buffer.duration-a);this.analyser.start("time");this.analyser.start("fft");this.paused=!1;this.chorus.start(e);this.flanger.start(e);this.phaser.start(e);this.autopanner.start(e);this.tremolo.start(e);this.ringmodulator.start(e);this.wah.start(e);
c=0;for(a=this.plugins.length;c<a;c++)this.plugins[c].plugin.start(e);this.callbacks.start(this.source,this.currentTime);var f=this;"[object Function]"===Object.prototype.toString.call(b)?this.processor.onaudioprocess=b:this.processor.onaudioprocess=function(a){var b=a.inputBuffer.getChannelData(0),c=a.inputBuffer.getChannelData(1),e=a.outputBuffer.getChannelData(0);a=a.outputBuffer.getChannelData(1);if(f.currentTime<Math.floor(f.source.buffer.duration)){for(var g=0;g<this.bufferSize;g++)e[g]=f.vocalcanceler.start(b[g],
c[g]),a[g]=f.vocalcanceler.start(c[g],b[g]),f.currentTime+=1*f.source.playbackRate.value/f.source.buffer.sampleRate,0===Math.floor(f.currentTime*f.source.buffer.sampleRate)%(1*f.source.buffer.sampleRate)&&f.callbacks.update(f.source,f.currentTime);f.analyser.timeAllL.update(f.currentTime);f.analyser.timeAllR.update(f.currentTime)}else f.source.loop?f.currentTime=0:f.end.call(f)}}return this};y.prototype.stop=function(){if(this.buffer instanceof AudioBuffer&&!this.paused){var a=this.context.currentTime;
this.source.stop(a);this.chorus.stop(a);this.flanger.stop(a);this.phaser.stop(a);this.autopanner.stop(a);this.tremolo.stop(a);this.ringmodulator.stop(a);this.wah.stop(a);for(var c=0,b=this.plugins.length;c<b;c++)this.plugins[c].plugin.stop(a);this.analyser.stop("time");this.analyser.stop("fft");this.processor.disconnect(0);this.processor.onaudioprocess=null;this.paused=!0;this.callbacks.stop(this.source,this.currentTime)}return this};y.prototype.get=function(){return this.source};y.prototype.toggle=
function(a,c,b){this.paused?this.start(a,c,b):this.stop();return this};y.prototype.end=function(){this.stop();this.currentTime=0;this.callbacks.ended(this.source,this.currentTime);return this};y.prototype.isBuffer=function(){return this.buffer instanceof AudioBuffer?!0:!1};y.prototype.isSource=function(){return this.source instanceof AudioBufferSourceNode&&this.source.buffer instanceof AudioBuffer?!0:!1};y.prototype.isPaused=function(){return this.paused};y.prototype.toString=function(){return"[AudioModule]"};
A.prototype=D(y.prototype);A.prototype.constructor=A;A.prototype.setup=function(a,c,b,e){if("[object Object]"===Object.prototype.toString.call(a)){var g=a;"id"in g&&(a=g.id);"type"in g&&(c=g.type);"formats"in g&&(b=g.formats);"callbacks"in g&&(e=g.callbacks)}g=String(a);c="video"!==String(c).toLowerCase()?"audio":"video";this.media=null!==a&&""!==g?document.getElementById(g):document.createElement(c);if(this.media instanceof HTMLMediaElement){Array.isArray(b)||(b=[b]);a=0;for(g=b.length;a<g;a++){var k=
c+"/"+String(b[a]).toLowerCase();if(/^(?:maybe|probably)/.test(this.media.canPlayType(k))){this.ex=b[a];break}}if(""===this.ex)throw Error("Media format that can be played does not exist !!");if("[object Object]"===Object.prototype.toString.call(e))for(var f in e)this.callbacks[f.toLowerCase()]="[object Function]"===Object.prototype.toString.call(e[f])?e[f]:function(){};var n=this;for(f in this.callbacks)switch(f){case "loadstart":this.media.addEventListener("loadstart",function(a){n.source instanceof
MediaElementAudioSourceNode||(n.source=n.context.createMediaElementSource(this));n.callbacks.loadstart(a,this)},!1);break;case "loadedmetadata":this.media.addEventListener("loadedmetadata",function(a){n.duration=this.duration;n.callbacks.loadedmetadata(a,this)},!1);break;case "ended":this.media.addEventListener("ended",function(a){var b=n.context.currentTime;this.pause();n.chorus.stop(b);n.flanger.stop(b);n.phaser.stop(b);n.autopanner.stop(b);n.tremolo.stop(b);n.ringmodulator.stop(b);n.wah.stop(b);
for(var c=0,e=n.plugins.length;c<e;c++)n.plugins[c].plugin.isActive&&n.plugins[c].plugin.stop(b);n.analyser.stop("time");n.analyser.stop("fft");n.processor.disconnect(0);n.processor.onaudioprocess=null;n.callbacks.ended(a,this)},!1);break;default:this.media.addEventListener(f,function(a){n.callbacks[a.type.toLowerCase()](a,this)},!1)}return this}this.media=null;l(this+" setup() : The media element that has the designated ID does not exists !!")};A.prototype.param=function(a,c){if("[object Object]"===
Object.prototype.toString.call(a))for(var b in a)this.param(b,a[b]);else{b=String(a).replace(/-/g,"").toLowerCase();var e=u.prototype.param.call(this,b,c);if(void 0!==e)return e;switch(b){case "playbackrate":if(void 0===c)return this.media instanceof HTMLMediaElement?this.media.playbackRate:this.playbackRate;var e=parseFloat(c),g;0.5<=e?(this.media instanceof HTMLMediaElement&&(this.media.playbackRate=e),this.playbackRate=e):l(this+" param() : The range of "+a+" is greater than or equal 0.5 !!");
break;case "currenttime":if(void 0===c)return this.media instanceof HTMLMediaElement?this.media.currentTime:0;e=parseFloat(c);if(this.media instanceof HTMLMediaElement)g=0,b=this.duration;else return;e>=g&&e<=b?this.media.currentTime=e:l(this+" param() : The range of "+a+" is between "+g+" and "+b+" !!");break;case "loop":case "muted":case "controls":if(void 0===c)return this.media instanceof HTMLMediaElement?this.media[b]:this[b];this.media instanceof HTMLMediaElement&&(this.media[b]=Boolean(c));
this[b]=Boolean(c);break;case "width":case "height":if(void 0===c)return this.media instanceof HTMLVideoElement?this.media[b]:0;e=parseInt(c);g=0;e>=g?this.media instanceof HTMLVideoElement&&(this.media[b]=e):l(this+" param() : The range of "+a+" is greater than or equal "+g+" !!");break;case "duration":return this.duration;case "channels":return this.source instanceof MediaElementAudioSourceNode?this.source.channelCount:0;default:"mastervolume"!==b&&l(this+' param() : The designated property ("'+
a+'") does not exist in accessible properties !!')}}return this};A.prototype.ready=function(a){a=String(a);try{-1!==a.indexOf("data:")||-1!==a.indexOf("blob:")?this.media.src=a:this.media.src=a+"."+this.ex}catch(c){throw Error("The designated resource cannot be loaded !!");}return this};A.prototype.start=function(a,c,b){if(this.source instanceof MediaElementAudioSourceNode&&this.media.paused){var e=this.context.currentTime;this.source.connect(this.processor);this.connect(this.processor,c);this.media.play();
a=parseFloat(a);this.media.currentTime=0<=a&&a<=this.duration?a:0;this.media.playbackRate=this.playbackRate;this.media.controls=this.controls;this.media.loop=this.loop;this.media.muted=this.muted;this.chorus.start(e);this.flanger.start(e);this.phaser.start(e);this.autopanner.start(e);this.tremolo.start(e);this.ringmodulator.start(e);this.wah.start(e);a=0;for(c=this.plugins.length;a<c;a++)this.plugins[a].plugin.start(e);this.analyser.start("time");this.analyser.start("fft");var g=this;"[object Function]"===
Object.prototype.toString.call(b)?this.processor.onaudioprocess=b:this.processor.onaudioprocess=function(a){var b=a.inputBuffer.getChannelData(0),c=a.inputBuffer.getChannelData(1),e=a.outputBuffer.getChannelData(0);a=a.outputBuffer.getChannelData(1);for(var l=0;l<this.bufferSize;l++)e[l]=g.vocalcanceler.start(b[l],c[l]),a[l]=g.vocalcanceler.start(c[l],b[l])}}return this};A.prototype.stop=function(){if(this.source instanceof MediaElementAudioSourceNode&&!this.media.paused){var a=this.context.currentTime;
this.media.pause();this.chorus.stop(a);this.flanger.stop(a);this.phaser.stop(a);this.autopanner.stop(a);this.tremolo.stop(a);this.ringmodulator.stop(a);this.wah.stop(a);for(var c=0,b=this.plugins.length;c<b;c++)this.plugins[c].plugin.stop(a);this.analyser.stop("time");this.analyser.stop("fft");this.processor.disconnect(0);this.processor.onaudioprocess=null}return this};A.prototype.get=function(){return this.media};A.prototype.toggle=function(a,c,b){this.media instanceof HTMLMediaElement&&(this.media.paused?
this.start(a,c,b):this.stop());return this};A.prototype.isMedia=function(){return this.media instanceof HTMLMediaElement?!0:!1};A.prototype.isSource=function(){return this.source instanceof MediaElementAudioSourceNode?!0:!1};A.prototype.isPaused=function(){return this.media instanceof HTMLMediaElement?this.media.paused:!0};A.prototype.fullscreen=function(){if(this.media instanceof HTMLVideoElement)if(this.media.webkitRequestFullscreen)this.media.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
else if(this.media.mozRequestFullScreen)this.media.mozRequestFullScreen();else if(this.media.requestFullscreen)this.media.requestFullscreen();else throw Error("Cannot change to full screen !!");return this};A.prototype.exitFullscreeen=function(){if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullscreen)document.mozCancelFullscreen();else if(document.exitFullscreen)document.exitFullscreen();else throw Error("Cannot exit from full screen !!");return this};
A.prototype.toString=function(){return"[MediaModule]"};I.prototype=D(u.prototype);I.prototype.constructor=I;I.prototype.mix=function(a){Array.isArray(a)||(a=[a]);this.sources=a;for(var c=0,b=this.sources.length;c<b;c++){var e=this.sources[c];if(!(e instanceof x||e instanceof C||e instanceof y||e instanceof A)){l(this+' mix() : The 1st argument is array that has X("oscillator") or X("oneshot") or X("audio") or X("media") !!');return}var g=this.context.currentTime;this.chorus.stop(g);this.flanger.stop(g);
this.phaser.stop(g);this.autopanner.stop(g);this.tremolo.stop(g);this.ringmodulator.stop(g);this.wah.stop(g);this.filter.stop(g);for(var k=0,f=this.plugins.length;k<f;k++)this.plugins[c].plugin.stop(g);e.analyser.stop("time");e.analyser.stop("fft");e.isAnalyser=!1;e.recorder.stop();e.session.close();e.processor.disconnect(0);e.processor.connect(this.processor)}this.connect(this.processor);e=this.context.currentTime;this.chorus.start(e);this.flanger.start(e);this.phaser.start(e);this.autopanner.start(e);
this.tremolo.start(e);this.ringmodulator.start(e);this.wah.start(e);this.filter.start(e);c=0;for(b=this.plugins.length;c<b;c++)this.plugins[c].plugin.start(e);this.isAnalyser||(this.analyser.start("time"),this.analyser.start("fft"),this.isAnalyser=!0);var n=this;this.processor.onaudioprocess=function(b){var c=b.inputBuffer.getChannelData(0),e=b.inputBuffer.getChannelData(1),f=b.outputBuffer.getChannelData(0),g=b.outputBuffer.getChannelData(1),k=!1;b=0;for(var l=n.sources.length;10>b;b++)l=a[b],l instanceof
x&&l.eg.isStop()?k=!0:l instanceof C&&l.isStop?k=!0:l instanceof y&&l.paused?k=!0:l instanceof A&&l.media.paused&&(k=!0);if(k){c=n.context.currentTime;n.chorus.stop(c);n.flanger.stop(c);n.phaser.stop(c);n.autopanner.stop(c);n.tremolo.stop(c);n.ringmodulator.stop(c);n.wah.stop(c);n.filter.stop(c);b=0;for(l=n.plugins.length;b<l;b++)n.plugins[b].plugin.stop(c);n.analyser.stop("time");n.analyser.stop("fft");n.isAnalyser=!1;this.disconnect(0);this.onaudioprocess=null}else f.set(c),g.set(e)};return this};
I.prototype.get=function(a){a=parseInt(a);return 0<=a&&a<this.sources.length?this.sources[a]:this.sources};I.prototype.toString=function(){return"[Mixer]"};G.prototype.setup=function(a,c){if("[object Object]"===Object.prototype.toString.call(a))for(var b in a)this.setup(b,a[b]);else b=String(a).toLowerCase(),b in this.callbacks?"[object Function]"===Object.prototype.toString.call(c)?this.callbacks[b]=c:l(this+' setup() : The type of "'+a+'" is function !!'):l(this+' setup() : The designated property ("'+
a+'") does not exist in accessible properties !!');return this};G.prototype.ready=function(a,c){null!==this.source&&this.stop();this.sequences=[];this.timerids=[];this.prev=[];if(Array.isArray(a)){for(var b=0,e=a.length;b<e;b++)if(!(a[b]instanceof OscillatorNode)){l(this+' ready() : The 1st argument is one of array that has OscillatorNode, X("oscillator"), X("oneshot") !!');return}this.source=a}else if(a instanceof OscillatorNode)this.source=[a];else if(a instanceof x||a instanceof C)this.source=
a;else{l(this+' ready() ; The 1st argument is one of array that has OscillatorNode, X("oscillator"), X("oneshot") !!');return}for(Array.isArray(c)||(c=[c]);0<c.length;){var g=[],k=String(c.shift()).match(/\s*(?:T\d+)\s*|\s*(?:O\d+)\s*|\s*(?:(?:[CDEFGABR][#+-]?)+(?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)\.?)(?:&(?:[CDEFGABR][#+-]?)+(?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)\.?)*\s*/ig);if(null===k){this.callbacks.error("MML","");return}for(var f=0,n=function(a,b){var c=
0;switch(b){case "C":c=3;break;case "D":c=5;break;case "E":c=7;break;case "F":c=8;break;case "G":c=10;break;case "A":c=12;break;case "B":c=14;break;case "R":return"R"}c=12*(a-1)+c;return 0<=c?c:-1},q=function(a){var b=Math.pow(2,1/12);return 0<=a?27.5*Math.pow(b,a):-1};0<k.length;){var p=k.shift().trim();if(/T\d+/i.test(p)){var t=parseInt(p.slice(1));if(0<t)t=60/t;else{this.callbacks.error("TEMPO",p);return}}else if(/O\d+/i.test(p)){var s=parseInt(p.slice(1));if(0>s){this.callbacks.error("OCTAVE",
p);return}}else if(/(?:(?:[CDEFGABR][#+-]?)+)(?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)(?:&(?:[CDEFGABR][#+-]?)+(?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)\.?)*/i.test(p)){if(void 0===t){this.callbacks.error("TEMPO",p);return}if(void 0===s){this.callbacks.error("OCTAVE",p);return}for(var u=p.match(/((?:[CDEFGABR][#+-]?)+)(?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)\.?.*/i)[1],v=[],b=0,e=u.length;b<e;b++){var z=u.charAt(b),z=n.call(this,s,z.toUpperCase());
switch(u.charAt(b+1)){case "#":case "+":z++;b++;break;case "-":z--,b++}z>=v[0]&&(z-=12);if(0>z){this.callbacks.error("NOTE",p);return}v.push(z)}u=[];b=0;for(e=v.length;b<e;b++){z="R"!==v[b]?q.call(this,v[b],p):0;if(-1===z){this.callbacks.error("NOTE",p);return}u.push(z)}e=p.split("&");for(b=0;0<e.length;)switch(z=e.shift().match(/(?:[CDEFGABR][#+-]?)+((?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)\.?.*)/i)[1],parseInt(z)){case 1:case 2:case 4:case 8:case 16:case 32:case 64:case 128:case 256:var y=
4/parseInt(z),b=b+(-1!==z.indexOf(".")?1.5*y*t:y*t);break;case 6:b+=2*t/3;break;case 12:b+=t/3;break;case 18:b+=2*t/9;break;case 24:b+=0.5*t/3;break;case 36:b+=t/9;break;case 48:b+=0.25*t/3;break;case 72:b+=0.5*t/9;break;case 96:b+=0.125*t/3;break;case 144:b+=0.25*t/9;break;case 192:b+=0.0625*t/3;break;default:this.callbacks.error("NOTE",p)}p=f;e=p+b;f+=b;g.push({indexes:v,frequencies:u,start:p,duration:b,stop:e})}}0<g.length&&(this.sequences.push(g),this.timerids.push(null))}return this.sequences};
G.prototype.start=function(a,c,b){var e=parseInt(a);if(0<=e&&e<this.sequences.length){if(!Array.isArray(this.sequences[e]))return;if(0===this.sequences[e].length)return this.stop(b),this.callbacks.ended(),this;var g=this.sequences[e].shift();if(Array.isArray(this.source)){a=0;for(var k=this.source.length;a<k;a++){var f=this.source[a],n=f.type,q=f.detune.value,f=this.context.createOscillator();f.start=f.start||f.noteOn;f.stop=f.stop||f.noteOff;f.type=n;f.frequency.value=g.frequencies[a];f.detune.value=
q;if(Array.isArray(c))for(f.connect(c[0]),a=0,k=c.length;a<k;a++)if(n=c[a],a<k-1){q=c[a+1];if(!(n instanceof AudioNode&&q instanceof AudioNode)){l(this+" start() : The 2nd argument is array that has AudioNode !!");return}n.connect(q)}else n.connect(this.context.destination);else f.connect(this.context.destination);f.start(this.context.currentTime);f.stop(this.context.currentTime+g.duration);this.source[a]=f}a=0;for(k=g.indexes.length;a<k;a++)"R"!==g.indexes[a]&&this.callbacks.start(g,a)}else if(this.source instanceof
x)for(this.source.start(g.frequencies,c,b),a=0,k=g.indexes.length;a<k;a++)"R"!==g.indexes[a]&&this.callbacks.start(g,a);else if(this.source instanceof C)for(a=0,k=g.indexes.length;a<k;a++)"R"!==g.indexes[a]&&(this.source.start(g.indexes[a],c,b),this.callbacks.start(g,a));var p=this;this.timerids[e]=v.setTimeout(function(){if(Array.isArray(p.source))for(var a=0,f=g.indexes.length;a<f;a++)"R"!==g.indexes[a]&&p.callbacks.stop(g,a);else if(p.source instanceof x)for(p.source.stop(g.frequencies,b),a=0,
f=g.indexes.length;a<f;a++)"R"!==g.indexes[a]&&p.callbacks.stop(g,a);else if(p.source instanceof C)for(a=0,f=g.indexes.length;a<f;a++)"R"!==g.indexes[a]&&(p.source.stop(g.indexes[a],b),p.callbacks.stop(g,a));p.prev=g;p.start(e,c,b)},1E3*g.duration)}else l(this+" start() : The range of designated MML part is between 0 and "+(this.sequences.length-1)+" !!");return this};G.prototype.stop=function(a){var c=this.prev;if(0!==c.length){if(Array.isArray(this.source))for(var b=0,e=c.indexes.length;b<e;b++)"R"!==
c.indexes[b]&&this.callbacks.stop(c,b);else if(this.source instanceof x)for(this.source.stop(c.frequencies,a),b=0,e=c.indexes.length;b<e;b++)"R"!==c.indexes[b]&&this.callbacks.stop(c,b);else if(this.source instanceof C)for(b=0,e=c.indexes.length;b<e;b++)"R"!==c.indexes[b]&&(this.source.stop(c.indexes[b],a),this.callbacks.stop(c,b));b=0;for(e=this.timerids.length;b<e;b++)v.clearTimeout(this.timerids[b]),this.timerids[b]=null;return this}};G.prototype.get=function(a){a=parseInt(a);return 0<=a&&a<this.sequences.length?
this.sequences[a]:this.sequences};G.prototype.toggle=function(a,c,b){this.isPaused()?this.start(a,c,b):this.stop()};G.prototype.isSequences=function(){return Array.isArray(this.sequences[0])?!0:!1};G.prototype.isPaused=function(){for(var a=0,c=this.timerids.length;a<c;a++){var b=this.timerids[a];if(null!==b&&void 0!==b)return!1}return!0};G.prototype.download=function(a){return"data:text/plain;base64,"+v.btoa(String(a))};G.prototype.toString=function(){return"[MML]"};var M=new u(audiocontext),N=new x(audiocontext),
X=new C(audiocontext),Y=new y(audiocontext),P=new A(audiocontext),Z=new I(audiocontext),$=new B,aa=new G(audiocontext);s=function(a,c){switch(String(a).replace(/-/g,"").toLowerCase()){case "oscillator":if(void 0===c)return N;var b=parseInt(c);if(0<=b&&b<N.sources.length)return N.sources[b];l("XSound() : The range of the 2nd argument is between 0 and "+(N.sources.length-1)+" !!");break;case "oneshot":return X;case "audio":return Y;case "media":return P;case "fallback":return $;case "mixer":return Z;
case "mml":return aa;default:l('XSound() : The 1st argument ("'+a+'") is one of "oscillator", "oneshot", "audio", "media", "fallback", "mixer", "mml" !!')}};s.IS_XSOUND=O;s.FULL_MODE=F;s.ERROR_MODE=J;s.SAMPLE_RATE=M.SAMPLE_RATE;s.BUFFER_SIZE=M.BUFFER_SIZE;s.NUM_INPUT=M.NUM_INPUT;s.NUM_OUTPUT=M.NUM_OUTPUT;s.error=Q;s.read=R;s.file=S;s.ajax=T;s.toFrequencies=U;s.convertTime=V;s.noConflict=W;s.clone=function(){var a=new x(audiocontext),c=new C(audiocontext),b=new y(audiocontext),e=new A(audiocontext),
g=new B,k=new I(audiocontext),f=new G(audiocontext);return function(n,q){switch(String(n).replace(/-/g,"").toLowerCase()){case "oscillator":if(void 0===q)return a;var p=parseInt(q);if(0<=p&&p<a.sources.length)return a.sources[p];l("XSound() : The range of the 2nd argument is between 0 and "+(a.sources.length-1)+" !!");break;case "oneshot":return c;case "audio":return b;case "media":return e;case "fallback":return g;case "mixer":return k;case "mml":return f;default:l('XSound() : The 1st argument ("'+
n+'") is one of "oscillator", "oneshot", "audio", "media", "fallback", "mixer", "mml" !!')}}};s.get=function(){return audiocontext};s.getCurrentTime=function(){return audiocontext.currentTime}}else{var P=new B;s=function(){return P};s.IS_XSOUND=O;s.ERROR_MODE=J;s.SAMPLE_RATE=null;s.BUFFER_SIZE=null;s.NUM_INPUT=null;s.NUM_OUTPUT=null;s.error=Q;s.read=R;s.file=S;s.ajax=T;s.toFrequencies=U;s.convertTime=V;s.noConflict=W;s.get=function(){return null};s.getCurrentTime=function(){return 0};s.clone=function(){var a=
new B;return function(){return a}}}s.toString=function(){return"[XSound]"};v.XSound=s;v.X=s})(window);